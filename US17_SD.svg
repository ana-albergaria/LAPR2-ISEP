<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1916.25px" preserveAspectRatio="none" style="width:2695px;height:1916px;" version="1.1" viewBox="0 0 2695 1916" width="2695.5px" zoomAndPan="magnify"><defs><filter height="300%" id="fyqucbi38t8eu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.5"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.0" dy="3.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1763.8535" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="56.625" y="74.707"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="115.4414" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="304.875" y="91.4707"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1608.8848" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="304.875" y="229.6758"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="608.625" y="287.3965"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="57.7207" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="727.125" y="114.2344"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1446.6094" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="727.125" y="351.6738"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1001.625" y="374.4375"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1001.625" y="474.4922"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1036.1543" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1140.75" y="560.7832"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="21" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1144.5" y="1351.3418"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="155.8184" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1140.75" y="1619.7012"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1381.5" y="583.5469"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1381.5" y="628.8105"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1381.5" y="674.0742"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1381.5" y="719.3379"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.7637" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1381.5" y="981.4336"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1381.5" y="1642.4648"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1544.25" y="764.6016"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1629.75" y="809.8652"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1726.5" y="855.1289"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1808.625" y="900.3926"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="533.2559" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1888.5" y="1063.6816"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="59.7773" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1888.5" y="1687.7285"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="179.8418" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="2241.75" y="1118.4727"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="104.7773" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="2241.75" y="1436.1328"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="21" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="2245.5" y="1464.8965"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="21" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="2245.5" y="1519.9102"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1483.1367" style="stroke:#000000;stroke-width:1.5;" width="2424.75" x="260.25" y="321.1465"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="94.8047" style="stroke:#000000;stroke-width:1.5;" width="411" x="666.75" y="443.9648"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="116.1914" style="stroke:#000000;stroke-width:1.5;" width="458.25" x="2219.25" y="1155.6094"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="237.3457" style="stroke:#000000;stroke-width:1.5;" width="1303.5" x="1070.25" y="1314.8145"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="60" x2="60" y1="67.207" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="308.25" x2="308.25" y1="67.207" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="612" x2="612" y1="260.6543" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="730.5" x2="730.5" y1="67.207" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="1005" x2="1005" y1="145.2129" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="1144.5" x2="1144.5" y1="180.1699" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="1385.25" x2="1385.25" y1="67.207" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="1548" x2="1548" y1="67.207" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="1633.5" x2="1633.5" y1="67.207" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="1730.25" x2="1730.25" y1="67.207" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="1812" x2="1812" y1="67.207" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="1892.25" x2="1892.25" y1="1012.4121" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="2245.5" x2="2245.5" y1="1101.2637" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="2550" x2="2550" y1="1229.3086" y2="1852.0605"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:5.0,5.0;" x1="2636.25" x2="2636.25" y1="1194.3516" y2="1852.0605"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="108.75" x="3.75" y="64.8999">Laboratory coordinator</text><ellipse cx="60.375" cy="11.25" fill="#FEFECE" filter="url(#fyqucbi38t8eu)" rx="6" ry="6" style="stroke:#A80036;stroke-width:1.5;"/><path d="M60.375,17.25 L60.375,37.5 M50.625,23.25 L70.125,23.25 M60.375,37.5 L50.625,48.75 M60.375,37.5 L70.125,48.75 " fill="none" filter="url(#fyqucbi38t8eu)" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="108.75" x="3.75" y="1862.2104">Laboratory coordinator</text><ellipse cx="60.375" cy="1872.0176" fill="#FEFECE" filter="url(#fyqucbi38t8eu)" rx="6" ry="6" style="stroke:#A80036;stroke-width:1.5;"/><path d="M60.375,1878.0176 L60.375,1898.2676 M50.625,1884.0176 L70.125,1884.0176 M60.375,1898.2676 L50.625,1909.5176 M60.375,1898.2676 L70.125,1909.5176 " fill="none" filter="url(#fyqucbi38t8eu)" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="78.75" x="267.75" y="39.75"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="62.25" x="273" y="55.8999">:ImportTestUI</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="78.75" x="267.75" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="62.25" x="273" y="1867.4604">:ImportTestUI</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="105.75" x="558" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="95.25" x="563.25" y="1867.4604">testFile:TestFileUtils</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="110.25" x="674.25" y="39.75"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="99.75" x="679.5" y="55.8999">:ImportTestController</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="110.25" x="674.25" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="99.75" x="679.5" y="1867.4604">:ImportTestController</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="126.75" x="940.5" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="116.25" x="945.75" y="1867.4604">:RegisterClientController</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="130.5" x="1077.75" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="120" x="1083" y="1867.4604">:CreateFileTestController</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="58.5" x="1354.5" y="39.75"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="48" x="1359.75" y="55.8999">:Company</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="58.5" x="1354.5" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="48" x="1359.75" y="1867.4604">:Company</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="36.9141" style="stroke:#A80036;stroke-width:1.125;" width="66" x="1513.5" y="26.543"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="50.25" x="1521.375" y="42.6929">clientStore</text><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="55.5" x="1518.75" y="55.8999">:ClientStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="36.9141" style="stroke:#A80036;stroke-width:1.125;" width="66" x="1513.5" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="50.25" x="1521.375" y="1867.4604">clientStore</text><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="55.5" x="1518.75" y="1880.6675">:ClientStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="36.9141" style="stroke:#A80036;stroke-width:1.125;" width="84" x="1590" y="26.543"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="66.75" x="1598.625" y="42.6929">testTypeStore</text><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="73.5" x="1595.25" y="55.8999">:TestTypeStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="36.9141" style="stroke:#A80036;stroke-width:1.125;" width="84" x="1590" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="66.75" x="1598.625" y="1867.4604">testTypeStore</text><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="73.5" x="1595.25" y="1880.6675">:TestTypeStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="36.9141" style="stroke:#A80036;stroke-width:1.125;" width="88.5" x="1684.5" y="26.543"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="74.25" x="1691.625" y="42.6929">parameterStore</text><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="78" x="1689.75" y="55.8999">:ParameterStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="36.9141" style="stroke:#A80036;stroke-width:1.125;" width="88.5" x="1684.5" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="74.25" x="1691.625" y="1867.4604">parameterStore</text><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="78" x="1689.75" y="1880.6675">:ParameterStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="36.9141" style="stroke:#A80036;stroke-width:1.125;" width="54.75" x="1783.5" y="26.543"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="39" x="1791.375" y="42.6929">calStore</text><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="44.25" x="1788.75" y="55.8999">:CalStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="36.9141" style="stroke:#A80036;stroke-width:1.125;" width="54.75" x="1783.5" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="39" x="1791.375" y="1867.4604">calStore</text><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="44.25" x="1788.75" y="1880.6675">:CalStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="84" x="1848.75" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="73.5" x="1854" y="1867.4604">store:TestStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="36.9141" style="stroke:#A80036;stroke-width:1.125;" width="34.5" x="2226.75" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="6" x="2241" y="1867.4604">tt</text><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="24" x="2232" y="1880.6675">:Test</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="87" x="2505" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="76.5" x="2510.25" y="1867.4604">: TestParameter</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="64.5" x="2602.5" y="1851.3105"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="54" x="2607.75" y="1867.4604">ExternalAPI</text><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1763.8535" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="56.625" y="74.707"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="115.4414" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="304.875" y="91.4707"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1608.8848" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="304.875" y="229.6758"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="608.625" y="287.3965"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="57.7207" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="727.125" y="114.2344"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1446.6094" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="727.125" y="351.6738"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1001.625" y="374.4375"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1001.625" y="474.4922"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1036.1543" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1140.75" y="560.7832"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="21" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1144.5" y="1351.3418"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="155.8184" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1140.75" y="1619.7012"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1381.5" y="583.5469"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1381.5" y="628.8105"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1381.5" y="674.0742"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1381.5" y="719.3379"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.7637" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1381.5" y="981.4336"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1381.5" y="1642.4648"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1544.25" y="764.6016"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1629.75" y="809.8652"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1726.5" y="855.1289"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="22.5" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1808.625" y="900.3926"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="533.2559" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1888.5" y="1063.6816"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="59.7773" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="1888.5" y="1687.7285"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="179.8418" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="2241.75" y="1118.4727"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="104.7773" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="2241.75" y="1436.1328"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="21" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="2245.5" y="1464.8965"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="21" style="stroke:#A80036;stroke-width:0.75;" width="7.5" x="2245.5" y="1519.9102"/><polygon fill="#A80036" points="295.875,88.4707,303.375,91.4707,295.875,94.4707,298.875,91.4707" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="64.125" x2="300.375" y1="91.4707" y2="91.4707"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="5.25" x="69.375" y="87.8284">1</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="191.25" x="77.625" y="87.8284">asks to import clinical tests from a CSV file.</text><polygon fill="#A80036" points="718.125,111.2344,725.625,114.2344,718.125,117.2344,721.125,114.2344" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="312.375" x2="722.625" y1="114.2344" y2="114.2344"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="5.25" x="317.625" y="110.592">2</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="33" x="325.875" y="110.592">create()</text><polygon fill="#A80036" points="931.5,133.998,939,136.998,931.5,139.998,934.5,136.998" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="734.625" x2="936" y1="136.998" y2="136.998"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="5.25" x="739.875" y="133.3557">3</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="111.75" x="748.125" y="133.3557">createClientCtrl = create()</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="126.75" x="940.5" y="120.2344"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="116.25" x="945.75" y="136.3843">:RegisterClientController</text><polygon fill="#A80036" points="1068.75,168.9551,1076.25,171.9551,1068.75,174.9551,1071.75,171.9551" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="730.875" x2="1073.25" y1="171.9551" y2="171.9551"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="5.25" x="736.125" y="168.3127">4</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="111.75" x="744.375" y="168.3127">createClientCtrl = create()</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="130.5" x="1077.75" y="155.1914"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="120" x="1083" y="171.3413">:CreateFileTestController</text><polygon fill="#A80036" points="72.375,203.9121,64.875,206.9121,72.375,209.9121,69.375,206.9121" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:2.0,2.0;" x1="67.875" x2="307.875" y1="206.9121" y2="206.9121"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="5.25" x="76.875" y="203.2698">5</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="214.5" x="85.125" y="203.2698">shows the file chooser and asks to select the file.</text><polygon fill="#A80036" points="295.875,226.6758,303.375,229.6758,295.875,232.6758,298.875,229.6758" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="64.125" x2="300.375" y1="229.6758" y2="229.6758"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="5.25" x="69.375" y="226.0334">6</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="99" x="77.625" y="226.0334">selects requested data</text><polygon fill="#A80036" points="549,249.4395,556.5,252.4395,549,255.4395,552,252.4395" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="312.375" x2="553.5" y1="252.4395" y2="252.4395"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="5.25" x="317.625" y="248.7971">7</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="34.5" x="325.875" y="248.7971">Create()</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="105.75" x="558" y="235.6758"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="95.25" x="563.25" y="251.8257">testFile:TestFileUtils</text><polygon fill="#A80036" points="599.625,284.3965,607.125,287.3965,599.625,290.3965,602.625,287.3965" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="312.375" x2="604.125" y1="287.3965" y2="287.3965"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="5.25" x="317.625" y="283.7542">8</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="273.75" x="325.875" y="283.7542">List&lt;TestFileDTO&gt;testFileDTO = getTestDataToDto(pathOfFile)</text><path d="M260.25,321.1465 L315,321.1465 L315,327.1465 L307.5,334.6465 L260.25,334.6465 L260.25,321.1465 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.75;"/><rect fill="none" height="1483.1367" style="stroke:#000000;stroke-width:1.5;" width="2424.75" x="260.25" y="321.1465"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="21" x="271.5" y="332.0178">loop</text><text fill="#000000" font-family="sans-serif" font-size="8.25" font-weight="bold" lengthAdjust="spacing" textLength="132.75" x="326.25" y="331.2107">[for each TestFileDTO of the list]</text><polygon fill="#A80036" points="718.125,348.6738,725.625,351.6738,718.125,354.6738,721.125,351.6738" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="312.375" x2="722.625" y1="351.6738" y2="351.6738"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="5.25" x="317.625" y="348.0315">9</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="149.25" x="325.875" y="348.0315">createTestsFromFile(TestFileDTO)</text><polygon fill="#A80036" points="992.625,371.4375,1000.125,374.4375,992.625,377.4375,995.625,374.4375" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="734.625" x2="997.125" y1="374.4375" y2="374.4375"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="739.875" y="370.7952">10</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="239.25" x="753.375" y="370.7952">existsClient = createClient(testFileDTO.getClientDTO())</text><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="32.0273" style="stroke:#000000;stroke-width:1.5;" width="131.25" x="938.25" y="402.9375"/><polygon fill="#EEEEEE" points="938.25,402.9375,984.75,402.9375,984.75,408.9375,977.25,416.4375,938.25,416.4375,938.25,402.9375" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="12.75" x="948" y="414.5588">ref</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="114.75" x="948" y="429.5588">SD_createClient(clientDto)</text><path d="M666.75,443.9648 L712.5,443.9648 L712.5,449.9648 L705,457.4648 L666.75,457.4648 L666.75,443.9648 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.75;"/><rect fill="none" height="94.8047" style="stroke:#000000;stroke-width:1.5;" width="411" x="666.75" y="443.9648"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="12" x="678" y="454.8362">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.25" font-weight="bold" lengthAdjust="spacing" textLength="145.5" x="723.75" y="454.0291">[client doesn't exist in Client Store]</text><polygon fill="#A80036" points="992.625,471.4922,1000.125,474.4922,992.625,477.4922,995.625,474.4922" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="734.625" x2="997.125" y1="474.4922" y2="474.4922"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="739.875" y="470.8499">11</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="121.5" x="753.375" y="470.8499">clientCreation = saveClient()</text><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="32.0273" style="stroke:#000000;stroke-width:1.5;" width="131.25" x="938.25" y="502.9922"/><polygon fill="#EEEEEE" points="938.25,502.9922,984.75,502.9922,984.75,508.9922,977.25,516.4922,938.25,516.4922,938.25,502.9922" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="12.75" x="948" y="514.6135">ref</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="69" x="970.875" y="529.6135">SD_saveClient()</text><polygon fill="#A80036" points="1131.75,557.7832,1139.25,560.7832,1131.75,563.7832,1134.75,560.7832" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="734.625" x2="1136.25" y1="560.7832" y2="560.7832"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="739.875" y="557.1409">12</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="105.75" x="753.375" y="557.1409">createTest(TestFileDTO)</text><polygon fill="#A80036" points="1372.5,580.5469,1380,583.5469,1372.5,586.5469,1375.5,583.5469" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1377" y1="583.5469" y2="583.5469"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="579.9045">13</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="126" x="1167" y="579.9045">clientStore = getClientStore()</text><polygon fill="#A80036" points="1372.5,625.8105,1380,628.8105,1372.5,631.8105,1375.5,628.8105" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1377" y1="628.8105" y2="628.8105"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="625.1682">14</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="155.25" x="1167" y="625.1682">testTypeStore = getTestTypeStore()</text><polygon fill="#A80036" points="1372.5,671.0742,1380,674.0742,1372.5,677.0742,1375.5,674.0742" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1377" y1="674.0742" y2="674.0742"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="670.4319">15</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="166.5" x="1167" y="670.4319">parameterStore = getParameterStore()</text><polygon fill="#A80036" points="1372.5,716.3379,1380,719.3379,1372.5,722.3379,1375.5,719.3379" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1377" y1="719.3379" y2="719.3379"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="715.6956">16</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="205.5" x="1167" y="715.6956">calStore = getClinicalAnalysisLaboratoryStore()</text><polygon fill="#A80036" points="1535.25,761.6016,1542.75,764.6016,1535.25,767.6016,1538.25,764.6016" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1539.75" y1="764.6016" y2="764.6016"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="760.9592">17</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="368.25" x="1167" y="760.9592">associatedClient = getClientByTinNumber(testFileDTO.getClientDTO().getTinNumber)</text><polygon fill="#A80036" points="1620.75,806.8652,1628.25,809.8652,1620.75,812.8652,1623.75,809.8652" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1625.25" y1="809.8652" y2="809.8652"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="806.2229">18</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="315" x="1167" y="806.2229">selectedTestType = getTestTypeByCode(TestFileDTO.getTestTypeCode)</text><polygon fill="#A80036" points="1717.5,852.1289,1725,855.1289,1717.5,858.1289,1720.5,855.1289" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1722" y1="855.1289" y2="855.1289"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="851.4866">19</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="323.25" x="1167" y="851.4866">selectedParamsList = getParamsByCodes(TestFileDTO.getParamsCodes)</text><polygon fill="#A80036" points="1799.625,897.3926,1807.125,900.3926,1799.625,903.3926,1802.625,900.3926" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1804.125" y1="900.3926" y2="900.3926"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="896.7502">20</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="185.25" x="1167" y="896.7502">cal = getCalByCode(TestFileDTO.getCalId)</text><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="32.0273" style="stroke:#000000;stroke-width:1.5;" width="135" x="1075.5" y="928.8926"/><polygon fill="#EEEEEE" points="1075.5,928.8926,1122,928.8926,1122,934.8926,1114.5,942.3926,1075.5,942.3926,1075.5,928.8926" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="12.75" x="1085.25" y="940.5139">ref</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="111.75" x="1088.625" y="955.5139">SD_extractDatesFromDto</text><polygon fill="#A80036" points="1372.5,978.4336,1380,981.4336,1372.5,984.4336,1375.5,981.4336" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1377" y1="981.4336" y2="981.4336"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="977.7913">21</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="113.25" x="1167" y="977.7913">testStore = getTestStore()</text><polygon fill="#A80036" points="1839.75,1001.1973,1847.25,1004.1973,1839.75,1007.1973,1842.75,1004.1973" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1385.25" x2="1844.25" y1="1004.1973" y2="1004.1973"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1390.5" y="1000.5549">22</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="33" x="1404" y="1000.5549">create()</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="84" x="1848.75" y="987.4336"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="73.5" x="1854" y="1003.5835">store:TestStore</text><polygon fill="#A80036" points="1879.5,1060.6816,1887,1063.6816,1879.5,1066.6816,1882.5,1063.6816" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1884" y1="1063.6816" y2="1063.6816"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="1047.7756">23</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="196.5" x="1167" y="1035.512">test = createTest(nhsCode, associatedClient,</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="261.75" x="1170" y="1047.7756">selectedTestType, selectedParamsList, paramsResults, cal,</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="296.25" x="1170" y="1060.0393">testRegDate, testChemDate, testDiagnosisDate, testValidationDate)</text><polygon fill="#A80036" points="2217.75,1107.9727,2225.25,1110.9727,2217.75,1113.9727,2220.75,1110.9727" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1896" x2="2222.25" y1="1110.9727" y2="1110.9727"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1901.25" y="1095.0667">24</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="168" x="1914.75" y="1082.803">createTest(nhsCode, associatedClient,</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="261.75" x="1917.75" y="1095.0667">selectedTestType, selectedParamsList, paramsResults, cal,</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="296.25" x="1917.75" y="1107.3303">testRegDate, testChemDate, testDiagnosisDate, testValidationDate)</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="36.9141" style="stroke:#A80036;stroke-width:1.125;" width="34.5" x="2226.75" y="1069.6816"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="6" x="2241" y="1085.8315">tt</text><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="24" x="2232" y="1099.0386">:Test</text><line style="stroke:#A80036;stroke-width:0.75;" x1="2249.25" x2="2280.75" y1="1134.6094" y2="1134.6094"/><line style="stroke:#A80036;stroke-width:0.75;" x1="2280.75" x2="2280.75" y1="1134.6094" y2="1144.3594"/><line style="stroke:#A80036;stroke-width:0.75;" x1="2250" x2="2280.75" y1="1144.3594" y2="1144.3594"/><polygon fill="#A80036" points="2257.5,1141.3594,2250,1144.3594,2257.5,1147.3594,2254.5,1144.3594" style="stroke:#A80036;stroke-width:0.75;"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="2254.5" y="1130.967">25</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="193.5" x="2268" y="1130.967">checkAttributes(NHScode, associatedClient)</text><path d="M2219.25,1155.6094 L2274,1155.6094 L2274,1161.6094 L2266.5,1169.1094 L2219.25,1169.1094 L2219.25,1155.6094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.75;"/><rect fill="none" height="116.1914" style="stroke:#000000;stroke-width:1.5;" width="458.25" x="2219.25" y="1155.6094"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="21" x="2230.5" y="1166.4807">loop</text><text fill="#000000" font-family="sans-serif" font-size="8.25" font-weight="bold" lengthAdjust="spacing" textLength="126.75" x="2285.25" y="1165.6736">[for each parameter of the list]</text><polygon fill="#A80036" points="2593.5,1183.1367,2601,1186.1367,2593.5,1189.1367,2596.5,1186.1367" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="2249.25" x2="2598" y1="1186.1367" y2="1186.1367"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="2254.5" y="1182.4944">26</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="163.5" x="2268" y="1182.4944">refValue = getRefValueFor(parameter)</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="64.5" x="2602.5" y="1169.373"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="54" x="2607.75" y="1185.5229">ExternalAPI</text><polygon fill="#A80036" points="2496,1218.0938,2503.5,1221.0938,2496,1224.0938,2499,1221.0938" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="2249.25" x2="2500.5" y1="1221.0938" y2="1221.0938"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="2254.5" y="1217.4514">27</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="224.25" x="2268" y="1217.4514">testParameter =  create(parameter, result, refValue)</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="23.707" style="stroke:#A80036;stroke-width:1.125;" width="87" x="2505" y="1204.3301"/><text fill="#000000" font-family="sans-serif" font-size="10.5" lengthAdjust="spacing" textLength="76.5" x="2510.25" y="1220.48">: TestParameter</text><line style="stroke:#A80036;stroke-width:0.75;" x1="2249.25" x2="2280.75" y1="1256.0508" y2="1256.0508"/><line style="stroke:#A80036;stroke-width:0.75;" x1="2280.75" x2="2280.75" y1="1256.0508" y2="1265.8008"/><line style="stroke:#A80036;stroke-width:0.75;" x1="2250" x2="2280.75" y1="1265.8008" y2="1265.8008"/><polygon fill="#A80036" points="2257.5,1262.8008,2250,1265.8008,2257.5,1268.8008,2254.5,1265.8008" style="stroke:#A80036;stroke-width:0.75;"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="2254.5" y="1252.4084">28</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="153" x="2268" y="1252.4084">testParameters.add(testParameter)</text><line style="stroke:#A80036;stroke-width:0.75;" x1="2249.25" x2="2280.75" y1="1297.5645" y2="1297.5645"/><line style="stroke:#A80036;stroke-width:0.75;" x1="2280.75" x2="2280.75" y1="1297.5645" y2="1307.3145"/><line style="stroke:#A80036;stroke-width:0.75;" x1="2245.5" x2="2280.75" y1="1307.3145" y2="1307.3145"/><polygon fill="#A80036" points="2253,1304.3145,2245.5,1307.3145,2253,1310.3145,2250,1307.3145" style="stroke:#A80036;stroke-width:0.75;"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="2254.5" y="1293.9221">29</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="144.75" x="2268" y="1293.9221">code = generateSequentialCode()</text><path d="M1070.25,1314.8145 L1116,1314.8145 L1116,1320.8145 L1108.5,1328.3145 L1070.25,1328.3145 L1070.25,1314.8145 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.75;"/><rect fill="none" height="237.3457" style="stroke:#000000;stroke-width:1.5;" width="1303.5" x="1070.25" y="1314.8145"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="12" x="1081.5" y="1325.6858">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.25" font-weight="bold" lengthAdjust="spacing" textLength="141" x="1127.25" y="1324.8787">[testChemDate different than null]</text><line style="stroke:#A80036;stroke-width:0.75;" x1="1152" x2="1183.5" y1="1345.3418" y2="1345.3418"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1183.5" x2="1183.5" y1="1345.3418" y2="1355.0918"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1152.75" x2="1183.5" y1="1355.0918" y2="1355.0918"/><polygon fill="#A80036" points="1160.25,1352.0918,1152.75,1355.0918,1160.25,1358.0918,1157.25,1355.0918" style="stroke:#A80036;stroke-width:0.75;"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1157.25" y="1341.6995">30</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="109.5" x="1170.75" y="1341.6995">sample = createSample()</text><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="32.0273" style="stroke:#000000;stroke-width:1.5;" width="135" x="1075.5" y="1383.5918"/><polygon fill="#EEEEEE" points="1075.5,1383.5918,1122,1383.5918,1122,1389.5918,1114.5,1397.0918,1075.5,1397.0918,1075.5,1383.5918" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="12.75" x="1085.25" y="1395.2131">ref</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="79.5" x="1104.75" y="1410.2131">SD_creatSample()</text><polygon fill="#A80036" points="2232.75,1433.1328,2240.25,1436.1328,2232.75,1439.1328,2235.75,1436.1328" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="2237.25" y1="1436.1328" y2="1436.1328"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="1432.4905">31</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="74.25" x="1167" y="1432.4905">test.addSample()</text><line style="stroke:#A80036;stroke-width:0.75;" x1="2253" x2="2284.5" y1="1458.8965" y2="1458.8965"/><line style="stroke:#A80036;stroke-width:0.75;" x1="2284.5" x2="2284.5" y1="1458.8965" y2="1468.6465"/><line style="stroke:#A80036;stroke-width:0.75;" x1="2253.75" x2="2284.5" y1="1468.6465" y2="1468.6465"/><polygon fill="#A80036" points="2261.25,1465.6465,2253.75,1468.6465,2261.25,1471.6465,2258.25,1468.6465" style="stroke:#A80036;stroke-width:0.75;"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="2258.25" y="1455.2542">32</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="69.75" x="2271.75" y="1455.2542">validate(sample)</text><line style="stroke:#A80036;stroke-width:0.75;" x1="2253" x2="2284.5" y1="1513.9102" y2="1513.9102"/><line style="stroke:#A80036;stroke-width:0.75;" x1="2284.5" x2="2284.5" y1="1513.9102" y2="1523.6602"/><line style="stroke:#A80036;stroke-width:0.75;" x1="2253.75" x2="2284.5" y1="1523.6602" y2="1523.6602"/><polygon fill="#A80036" points="2261.25,1520.6602,2253.75,1523.6602,2261.25,1526.6602,2258.25,1523.6602" style="stroke:#A80036;stroke-width:0.75;"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="2258.25" y="1510.2678">33</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="93" x="2271.75" y="1510.2678">samples.add(sample)</text><polygon fill="#A80036" points="1879.5,1571.1738,1887,1574.1738,1879.5,1577.1738,1882.5,1574.1738" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1884" y1="1574.1738" y2="1574.1738"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="1570.5315">34</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="109.5" x="1167" y="1570.5315">result = validateTest(test)</text><polygon fill="#A80036" points="742.875,1593.9375,735.375,1596.9375,742.875,1599.9375,739.875,1596.9375" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="738.375" x2="1143.75" y1="1596.9375" y2="1596.9375"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="747.375" y="1593.2952">35</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="24" x="760.875" y="1593.2952">result</text><polygon fill="#A80036" points="1131.75,1616.7012,1139.25,1619.7012,1131.75,1622.7012,1134.75,1619.7012" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="734.625" x2="1136.25" y1="1619.7012" y2="1619.7012"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="739.875" y="1616.0588">36</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="44.25" x="753.375" y="1616.0588">saveTest()</text><polygon fill="#A80036" points="1372.5,1639.4648,1380,1642.4648,1372.5,1645.4648,1375.5,1642.4648" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1377" y1="1642.4648" y2="1642.4648"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="1638.8225">37</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="113.25" x="1167" y="1638.8225">testStore = getTestStore()</text><polygon fill="#A80036" points="1879.5,1684.7285,1887,1687.7285,1879.5,1690.7285,1882.5,1687.7285" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1148.25" x2="1884" y1="1687.7285" y2="1687.7285"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1153.5" y="1684.0862">38</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="60.75" x="1167" y="1684.0862">saveTest(test)</text><line style="stroke:#A80036;stroke-width:0.75;" x1="1896" x2="1927.5" y1="1710.4922" y2="1710.4922"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1927.5" x2="1927.5" y1="1710.4922" y2="1720.2422"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1896.75" x2="1927.5" y1="1720.2422" y2="1720.2422"/><polygon fill="#A80036" points="1904.25,1717.2422,1896.75,1720.2422,1904.25,1723.2422,1901.25,1720.2422" style="stroke:#A80036;stroke-width:0.75;"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1901.25" y="1706.8499">39</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="73.5" x="1914.75" y="1706.8499">validateTest(test)</text><line style="stroke:#A80036;stroke-width:0.75;" x1="1896" x2="1927.5" y1="1746.7559" y2="1746.7559"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1927.5" x2="1927.5" y1="1746.7559" y2="1756.5059"/><line style="stroke:#A80036;stroke-width:0.75;" x1="1892.25" x2="1927.5" y1="1756.5059" y2="1756.5059"/><polygon fill="#A80036" points="1899.75,1753.5059,1892.25,1756.5059,1899.75,1759.5059,1896.75,1756.5059" style="stroke:#A80036;stroke-width:0.75;"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="1901.25" y="1743.1135">40</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="57" x="1914.75" y="1743.1135">addTest(test)</text><polygon fill="#A80036" points="742.875,1772.5195,735.375,1775.5195,742.875,1778.5195,739.875,1775.5195" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;" x1="738.375" x2="1143.75" y1="1775.5195" y2="1775.5195"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="747.375" y="1771.8772">41</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="24" x="760.875" y="1771.8772">result</text><polygon fill="#A80036" points="320.625,1795.2832,313.125,1798.2832,320.625,1801.2832,317.625,1798.2832" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:2.0,2.0;" x1="316.125" x2="730.125" y1="1798.2832" y2="1798.2832"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="325.125" y="1794.6409">42</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="24" x="338.625" y="1794.6409">result</text><polygon fill="#A80036" points="68.625,1835.5605,61.125,1838.5605,68.625,1841.5605,65.625,1838.5605" style="stroke:#A80036;stroke-width:0.75;"/><line style="stroke:#A80036;stroke-width:0.75;stroke-dasharray:2.0,2.0;" x1="64.125" x2="307.875" y1="1838.5605" y2="1838.5605"/><text fill="#000000" font-family="sans-serif" font-size="9.75" font-weight="bold" lengthAdjust="spacing" textLength="10.5" x="73.125" y="1828.7864">43</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="114" x="86.625" y="1822.6545">informs operation success</text><text fill="#000000" font-family="sans-serif" font-size="9.75" lengthAdjust="spacing" textLength="119.25" x="89.625" y="1834.9182">and shows all created tests</text><!--MD5=[887d035b3c05094cd86284a691bc5b7a]
@startuml
autonumber
'hide footbox
actor "Laboratory coordinator" as ADM
participant ":ImportTestUI  " as UI
participant "testFile:TestFileUtils" as TST
participant ":ImportTestController" as CTRL
participant ":RegisterClientController" as CLIENT_CTRL
participant ":CreateFileTestController" as TEST_CTRL
participant ":Company" as PLAT
participant "clientStore\n:ClientStore" as CLIENT_STORE
participant "testTypeStore\n:TestTypeStore" as TEST_TYPE_STORE
participant "parameterStore\n:ParameterStore" as PARAM_STORE
participant "calStore\n:CalStore" as CAL_STORE
participant "store:TestStore" as ORG
participant "tt\n:Test" as TAREFA
participant ": TestParameter" as tp

activate ADM
ADM -> UI : asks to import clinical tests from a CSV file.
activate UI

UI -> CTRL : create()
activate CTRL
CTRL -> CLIENT_CTRL** : createClientCtrl = create()
CTRL -> TEST_CTRL** : createClientCtrl = create()
deactivate CTRL




UI - -> ADM : shows the file chooser and asks to select the file.
deactivate UI

ADM -> UI : selects requested data
activate UI

UI -> TST** : Create()
UI -> TST : List<TestFileDTO>testFileDTO = getTestDataToDto(pathOfFile)
activate TST
deactivate TST
loop for each TestFileDTO of the list

UI -> CTRL : createTestsFromFile(TestFileDTO)
activate CTRL

/'
CTRL -> TEST_LIST** : create()
'/


CTRL -> CLIENT_CTRL : existsClient = createClient(testFileDTO.getClientDTO())
activate CLIENT_CTRL

ref over CLIENT_CTRL
SD_createClient(clientDto)
end
deactivate CLIENT_CTRL

alt client doesn't exist in Client Store
CTRL -> CLIENT_CTRL : clientCreation = saveClient()
activate CLIENT_CTRL
ref over CLIENT_CTRL
SD_saveClient()
end

deactivate CLIENT_CTRL
end
CTRL -> TEST_CTRL : createTest(TestFileDTO)
activate TEST_CTRL

TEST_CTRL -> PLAT : clientStore = getClientStore()
activate PLAT
deactivate PLAT


TEST_CTRL -> PLAT : testTypeStore = getTestTypeStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> PLAT : parameterStore = getParameterStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> PLAT : calStore = getClinicalAnalysisLaboratoryStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> CLIENT_STORE : associatedClient = getClientByTinNumber(testFileDTO.getClientDTO().getTinNumber)
activate CLIENT_STORE
deactivate CLIENT_STORE

TEST_CTRL -> TEST_TYPE_STORE : selectedTestType = getTestTypeByCode(TestFileDTO.getTestTypeCode)
activate TEST_TYPE_STORE
deactivate TEST_TYPE_STORE



TEST_CTRL -> PARAM_STORE : selectedParamsList = getParamsByCodes(TestFileDTO.getParamsCodes)
activate PARAM_STORE
deactivate PARAM_STORE

TEST_CTRL -> CAL_STORE : cal = getCalByCode(TestFileDTO.getCalId)
activate CAL_STORE
deactivate CAL_STORE

ref over TEST_CTRL
SD_extractDatesFromDto
end

TEST_CTRL -> PLAT : testStore = getTestStore()
activate PLAT
PLAT -> ORG** : create()
deactivate PLAT

TEST_CTRL -> ORG : test = createTest(nhsCode, associatedClient,\n selectedTestType, selectedParamsList, paramsResults, cal,\n testRegDate, testChemDate, testDiagnosisDate, testValidationDate)
activate ORG
ORG -> TAREFA** : createTest(nhsCode, associatedClient,\n selectedTestType, selectedParamsList, paramsResults, cal,\n testRegDate, testChemDate, testDiagnosisDate, testValidationDate)

activate TAREFA
TAREFA -> TAREFA : checkAttributes(NHScode, associatedClient)

loop for each parameter of the list
TAREFA -> ExternalAPI** : refValue = getRefValueFor(parameter)
TAREFA -> tp**: testParameter =  create(parameter, result, refValue)
TAREFA -> TAREFA: testParameters.add(testParameter)
end

TAREFA -> TAREFA : code = generateSequentialCode()
deactivate TAREFA

alt testChemDate different than null
TEST_CTRL -> TEST_CTRL : sample = createSample()
ref over TEST_CTRL
SD_creatSample()
end
activate TEST_CTRL
deactivate TEST_CTRL

TEST_CTRL -> TAREFA : test.addSample()
activate TAREFA

TAREFA -> TAREFA : validate(sample)
activate TAREFA
deactivate TAREFA

TAREFA -> TAREFA : samples.add(sample)
activate TAREFA
deactivate TAREFA
deactivate TAREFA
end

TEST_CTRL -> ORG : result = validateTest(test)
TEST_CTRL -> CTRL : result
deactivate TEST_CTRL

deactivate TEST_CTRL
deactivate ORG

CTRL -> TEST_CTRL : saveTest()
activate TEST_CTRL

TEST_CTRL -> PLAT : testStore = getTestStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> ORG : saveTest(test)
activate ORG

ORG -> ORG: validateTest(test)
ORG -> ORG: addTest(test)
deactivate ORG

TEST_CTRL -> CTRL : result
deactivate TEST_CTRL


CTRL - -> UI: result
deactivate CTRL
end


UI - -> ADM : informs operation success\n and shows all created tests
deactivate ORG
deactivate CTRL
deactivate UI

deactivate ADM

@enduml

@startuml
autonumber
actor "Laboratory coordinator" as ADM
participant ":ImportTestUI  " as UI
participant "testFile:TestFileUtils" as TST
participant ":ImportTestController" as CTRL
participant ":RegisterClientController" as CLIENT_CTRL
participant ":CreateFileTestController" as TEST_CTRL
participant ":Company" as PLAT
participant "clientStore\n:ClientStore" as CLIENT_STORE
participant "testTypeStore\n:TestTypeStore" as TEST_TYPE_STORE
participant "parameterStore\n:ParameterStore" as PARAM_STORE
participant "calStore\n:CalStore" as CAL_STORE
participant "store:TestStore" as ORG
participant "tt\n:Test" as TAREFA
participant ": TestParameter" as tp

activate ADM
ADM -> UI : asks to import clinical tests from a CSV file.
activate UI

UI -> CTRL : create()
activate CTRL
CTRL -> CLIENT_CTRL** : createClientCtrl = create()
CTRL -> TEST_CTRL** : createClientCtrl = create()
deactivate CTRL




UI - -> ADM : shows the file chooser and asks to select the file.
deactivate UI

ADM -> UI : selects requested data
activate UI

UI -> TST** : Create()
UI -> TST : List<TestFileDTO>testFileDTO = getTestDataToDto(pathOfFile)
activate TST
deactivate TST
loop for each TestFileDTO of the list

UI -> CTRL : createTestsFromFile(TestFileDTO)
activate CTRL



CTRL -> CLIENT_CTRL : existsClient = createClient(testFileDTO.getClientDTO())
activate CLIENT_CTRL

ref over CLIENT_CTRL
SD_createClient(clientDto)
end
deactivate CLIENT_CTRL

alt client doesn't exist in Client Store
CTRL -> CLIENT_CTRL : clientCreation = saveClient()
activate CLIENT_CTRL
ref over CLIENT_CTRL
SD_saveClient()
end

deactivate CLIENT_CTRL
end
CTRL -> TEST_CTRL : createTest(TestFileDTO)
activate TEST_CTRL

TEST_CTRL -> PLAT : clientStore = getClientStore()
activate PLAT
deactivate PLAT


TEST_CTRL -> PLAT : testTypeStore = getTestTypeStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> PLAT : parameterStore = getParameterStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> PLAT : calStore = getClinicalAnalysisLaboratoryStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> CLIENT_STORE : associatedClient = getClientByTinNumber(testFileDTO.getClientDTO().getTinNumber)
activate CLIENT_STORE
deactivate CLIENT_STORE

TEST_CTRL -> TEST_TYPE_STORE : selectedTestType = getTestTypeByCode(TestFileDTO.getTestTypeCode)
activate TEST_TYPE_STORE
deactivate TEST_TYPE_STORE



TEST_CTRL -> PARAM_STORE : selectedParamsList = getParamsByCodes(TestFileDTO.getParamsCodes)
activate PARAM_STORE
deactivate PARAM_STORE

TEST_CTRL -> CAL_STORE : cal = getCalByCode(TestFileDTO.getCalId)
activate CAL_STORE
deactivate CAL_STORE

ref over TEST_CTRL
SD_extractDatesFromDto
end

TEST_CTRL -> PLAT : testStore = getTestStore()
activate PLAT
PLAT -> ORG** : create()
deactivate PLAT

TEST_CTRL -> ORG : test = createTest(nhsCode, associatedClient,\n selectedTestType, selectedParamsList, paramsResults, cal,\n testRegDate, testChemDate, testDiagnosisDate, testValidationDate)
activate ORG
ORG -> TAREFA** : createTest(nhsCode, associatedClient,\n selectedTestType, selectedParamsList, paramsResults, cal,\n testRegDate, testChemDate, testDiagnosisDate, testValidationDate)

activate TAREFA
TAREFA -> TAREFA : checkAttributes(NHScode, associatedClient)

loop for each parameter of the list
TAREFA -> ExternalAPI** : refValue = getRefValueFor(parameter)
TAREFA -> tp**: testParameter =  create(parameter, result, refValue)
TAREFA -> TAREFA: testParameters.add(testParameter)
end

TAREFA -> TAREFA : code = generateSequentialCode()
deactivate TAREFA

alt testChemDate different than null
TEST_CTRL -> TEST_CTRL : sample = createSample()
ref over TEST_CTRL
SD_creatSample()
end
activate TEST_CTRL
deactivate TEST_CTRL

TEST_CTRL -> TAREFA : test.addSample()
activate TAREFA

TAREFA -> TAREFA : validate(sample)
activate TAREFA
deactivate TAREFA

TAREFA -> TAREFA : samples.add(sample)
activate TAREFA
deactivate TAREFA
deactivate TAREFA
end

TEST_CTRL -> ORG : result = validateTest(test)
TEST_CTRL -> CTRL : result
deactivate TEST_CTRL

deactivate TEST_CTRL
deactivate ORG

CTRL -> TEST_CTRL : saveTest()
activate TEST_CTRL

TEST_CTRL -> PLAT : testStore = getTestStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> ORG : saveTest(test)
activate ORG

ORG -> ORG: validateTest(test)
ORG -> ORG: addTest(test)
deactivate ORG

TEST_CTRL -> CTRL : result
deactivate TEST_CTRL


CTRL - -> UI: result
deactivate CTRL
end


UI - -> ADM : informs operation success\n and shows all created tests
deactivate ORG
deactivate CTRL
deactivate UI

deactivate ADM

@enduml

PlantUML version 1.2021.00(Sun Jan 10 10:25:05 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: BR
--></g></svg>