<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1584.1px" preserveAspectRatio="none" style="width:2228px;height:1584px;" version="1.1" viewBox="0 0 2228 1584" width="2228.28px" zoomAndPan="magnify"><defs><filter height="300%" id="fyqucbi38t8eu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.24"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.48" dy="2.48" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1458.1189" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="46.81" y="61.7578"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="95.4316" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="252.03" y="75.6158"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1330.0114" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="252.03" y="189.8653"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="503.13" y="237.5811"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="47.7158" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="601.09" y="94.4338"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1195.8638" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="601.09" y="290.717"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="828.01" y="309.535"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="828.01" y="392.2469"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="856.5542" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="943.02" y="463.5808"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="17.36" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="946.12" y="1117.1092"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="128.8098" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="943.02" y="1338.953"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1142.04" y="482.3988"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1142.04" y="519.8167"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1142.04" y="557.2347"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1142.04" y="594.6527"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.818" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1142.04" y="811.3184"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1142.04" y="1357.7709"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1276.58" y="632.0706"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1347.26" y="669.4886"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1427.24" y="706.9066"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1495.13" y="744.3245"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="440.8248" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1561.16" y="879.3102"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="49.4159" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1561.16" y="1395.1889"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="148.6692" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1853.18" y="924.6041"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="86.6159" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1853.18" y="1187.2031"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="17.36" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1856.28" y="1210.9811"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="17.36" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1856.28" y="1256.4591"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1226.0597" style="stroke:#000000;stroke-width:1.24;" width="2004.46" x="215.14" y="265.4811"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="78.3719" style="stroke:#000000;stroke-width:1.24;" width="339.76" x="551.18" y="367.0109"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="96.0516" style="stroke:#000000;stroke-width:1.24;" width="378.82" x="1834.58" y="955.3038"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="196.2058" style="stroke:#000000;stroke-width:1.24;" width="1077.56" x="884.74" y="1086.9133"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="49.6" x2="49.6" y1="55.5578" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="254.82" x2="254.82" y1="55.5578" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="505.92" x2="505.92" y1="215.4742" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="603.88" x2="603.88" y1="55.5578" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="830.8" x2="830.8" y1="120.0427" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="946.12" x2="946.12" y1="148.9405" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="1145.14" x2="1145.14" y1="55.5578" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="1279.68" x2="1279.68" y1="55.5578" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="1350.36" x2="1350.36" y1="55.5578" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="1430.34" x2="1430.34" y1="55.5578" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="1497.92" x2="1497.92" y1="55.5578" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="1564.26" x2="1564.26" y1="836.9273" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="1856.28" x2="1856.28" y1="910.378" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="2108" x2="2108" y1="1016.2284" y2="1531.0367"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:5.0,5.0;" x1="2179.3" x2="2179.3" y1="987.3306" y2="1531.0367"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="89.9" x="3.1" y="53.6506">Laboratory coordinator</text><ellipse cx="49.91" cy="9.3" fill="#FEFECE" filter="url(#fyqucbi38t8eu)" rx="4.96" ry="4.96" style="stroke:#A80036;stroke-width:1.24;"/><path d="M49.91,14.26 L49.91,31 M41.85,19.22 L57.97,19.22 M49.91,31 L41.85,40.3 M49.91,31 L57.97,40.3 " fill="none" filter="url(#fyqucbi38t8eu)" style="stroke:#A80036;stroke-width:1.24;"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="89.9" x="3.1" y="1539.4273">Laboratory coordinator</text><ellipse cx="49.91" cy="1547.5345" fill="#FEFECE" filter="url(#fyqucbi38t8eu)" rx="4.96" ry="4.96" style="stroke:#A80036;stroke-width:1.24;"/><path d="M49.91,1552.4945 L49.91,1569.2345 M41.85,1557.4545 L57.97,1557.4545 M49.91,1569.2345 L41.85,1578.5345 M49.91,1569.2345 L57.97,1578.5345 " fill="none" filter="url(#fyqucbi38t8eu)" style="stroke:#A80036;stroke-width:1.24;"/><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="65.1" x="221.34" y="32.86"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="51.46" x="225.68" y="46.2106">:ImportTestUI</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="65.1" x="221.34" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="51.46" x="225.68" y="1543.7673">:ImportTestUI</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="87.42" x="461.28" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="78.74" x="465.62" y="1543.7673">testFile:TestFileUtils</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="91.14" x="557.38" y="32.86"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="82.46" x="561.72" y="46.2106">:ImportTestController</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="91.14" x="557.38" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="82.46" x="561.72" y="1543.7673">:ImportTestController</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="104.78" x="777.48" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="96.1" x="781.82" y="1543.7673">:RegisterClientController</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="107.88" x="890.94" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="99.2" x="895.28" y="1543.7673">:CreateFileTestController</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="48.36" x="1119.72" y="32.86"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="39.68" x="1124.06" y="46.2106">:Company</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="48.36" x="1119.72" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="39.68" x="1124.06" y="1543.7673">:Company</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="30.5156" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="54.56" x="1251.16" y="21.9422"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="41.54" x="1257.67" y="35.2928">clientStore</text><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="45.88" x="1255.5" y="46.2106">:ClientStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="30.5156" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="54.56" x="1251.16" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="41.54" x="1257.67" y="1543.7673">clientStore</text><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="45.88" x="1255.5" y="1554.6851">:ClientStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="30.5156" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="69.44" x="1314.4" y="21.9422"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="55.18" x="1321.53" y="35.2928">testTypeStore</text><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="60.76" x="1318.74" y="46.2106">:TestTypeStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="30.5156" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="69.44" x="1314.4" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="55.18" x="1321.53" y="1543.7673">testTypeStore</text><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="60.76" x="1318.74" y="1554.6851">:TestTypeStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="30.5156" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="73.16" x="1392.52" y="21.9422"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="61.38" x="1398.41" y="35.2928">parameterStore</text><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="64.48" x="1396.86" y="46.2106">:ParameterStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="30.5156" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="73.16" x="1392.52" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="61.38" x="1398.41" y="1543.7673">parameterStore</text><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="64.48" x="1396.86" y="1554.6851">:ParameterStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="30.5156" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="45.26" x="1474.36" y="21.9422"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="32.24" x="1480.87" y="35.2928">calStore</text><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="36.58" x="1478.7" y="46.2106">:CalStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="30.5156" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="45.26" x="1474.36" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="32.24" x="1480.87" y="1543.7673">calStore</text><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="36.58" x="1478.7" y="1554.6851">:CalStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="69.44" x="1528.3" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="60.76" x="1532.64" y="1543.7673">store:TestStore</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="30.5156" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="28.52" x="1840.78" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="4.96" x="1852.56" y="1543.7673">tt</text><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="19.84" x="1845.12" y="1554.6851">:Test</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="71.92" x="2070.8" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="63.24" x="2075.14" y="1543.7673">: TestParameter</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="53.32" x="2151.4" y="1530.4167"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="44.64" x="2155.74" y="1543.7673">ExternalAPI</text><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1458.1189" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="46.81" y="61.7578"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="95.4316" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="252.03" y="75.6158"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1330.0114" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="252.03" y="189.8653"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="503.13" y="237.5811"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="47.7158" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="601.09" y="94.4338"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="1195.8638" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="601.09" y="290.717"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="828.01" y="309.535"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="828.01" y="392.2469"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="856.5542" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="943.02" y="463.5808"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="17.36" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="946.12" y="1117.1092"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="128.8098" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="943.02" y="1338.953"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1142.04" y="482.3988"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1142.04" y="519.8167"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1142.04" y="557.2347"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1142.04" y="594.6527"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.818" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1142.04" y="811.3184"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1142.04" y="1357.7709"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1276.58" y="632.0706"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1347.26" y="669.4886"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1427.24" y="706.9066"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="18.6" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1495.13" y="744.3245"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="440.8248" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1561.16" y="879.3102"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="49.4159" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1561.16" y="1395.1889"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="148.6692" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1853.18" y="924.6041"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="86.6159" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1853.18" y="1187.2031"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="17.36" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1856.28" y="1210.9811"/><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="17.36" style="stroke:#A80036;stroke-width:0.62;" width="6.2" x="1856.28" y="1256.4591"/><polygon fill="#A80036" points="244.59,73.1358,250.79,75.6158,244.59,78.0958,247.07,75.6158" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="53.01" x2="248.31" y1="75.6158" y2="75.6158"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="4.34" x="57.35" y="72.6048">1</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="158.1" x="64.17" y="72.6048">asks to import clinical tests from a CSV file.</text><polygon fill="#A80036" points="593.65,91.9538,599.85,94.4338,593.65,96.9138,596.13,94.4338" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="258.23" x2="597.37" y1="94.4338" y2="94.4338"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="4.34" x="262.57" y="91.4228">2</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="27.28" x="269.39" y="91.4228">create()</text><polygon fill="#A80036" points="770.04,110.7717,776.24,113.2517,770.04,115.7317,772.52,113.2517" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="607.29" x2="773.76" y1="113.2517" y2="113.2517"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="4.34" x="611.63" y="110.2407">3</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="92.38" x="618.45" y="110.2407">createClientCtrl = create()</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="104.78" x="777.48" y="99.3938"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="96.1" x="781.82" y="112.7443">:RegisterClientController</text><polygon fill="#A80036" points="883.5,139.6695,889.7,142.1495,883.5,144.6295,885.98,142.1495" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="604.19" x2="887.22" y1="142.1495" y2="142.1495"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="4.34" x="608.53" y="139.1385">4</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="92.38" x="615.35" y="139.1385">createClientCtrl = create()</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="107.88" x="890.94" y="128.2916"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="99.2" x="895.28" y="141.6421">:CreateFileTestController</text><polygon fill="#A80036" points="59.83,168.5673,53.63,171.0473,59.83,173.5273,57.35,171.0473" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:2.0,2.0;" x1="56.11" x2="254.51" y1="171.0473" y2="171.0473"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="4.34" x="63.55" y="168.0363">5</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="177.32" x="70.37" y="168.0363">shows the file chooser and asks to select the file.</text><polygon fill="#A80036" points="244.59,187.3853,250.79,189.8653,244.59,192.3453,247.07,189.8653" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="53.01" x2="248.31" y1="189.8653" y2="189.8653"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="4.34" x="57.35" y="186.8543">6</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="81.84" x="64.17" y="186.8543">selects requested data</text><polygon fill="#A80036" points="453.84,206.2033,460.04,208.6833,453.84,211.1633,456.32,208.6833" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="258.23" x2="457.56" y1="208.6833" y2="208.6833"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="4.34" x="262.57" y="205.6723">7</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="28.52" x="269.39" y="205.6723">Create()</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="87.42" x="461.28" y="194.8253"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="78.74" x="465.62" y="208.1759">testFile:TestFileUtils</text><polygon fill="#A80036" points="495.69,235.1011,501.89,237.5811,495.69,240.0611,498.17,237.5811" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="258.23" x2="499.41" y1="237.5811" y2="237.5811"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="4.34" x="262.57" y="234.5701">8</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="226.3" x="269.39" y="234.5701">List&lt;TestFileDTO&gt;testFileDTO = getTestDataToDto(pathOfFile)</text><path d="M215.14,265.4811 L260.4,265.4811 L260.4,270.4411 L254.2,276.6411 L215.14,276.6411 L215.14,265.4811 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.62;"/><rect fill="none" height="1226.0597" style="stroke:#000000;stroke-width:1.24;" width="2004.46" x="215.14" y="265.4811"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="17.36" x="224.44" y="274.4681">loop</text><text fill="#000000" font-family="sans-serif" font-size="6.82" font-weight="bold" lengthAdjust="spacing" textLength="109.74" x="269.7" y="273.8008">[for each TestFileDTO of the list]</text><polygon fill="#A80036" points="593.65,288.237,599.85,290.717,593.65,293.197,596.13,290.717" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="258.23" x2="597.37" y1="290.717" y2="290.717"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="4.34" x="262.57" y="287.706">9</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="123.38" x="269.39" y="287.706">createTestsFromFile(TestFileDTO)</text><polygon fill="#A80036" points="820.57,307.055,826.77,309.535,820.57,312.015,823.05,309.535" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="607.29" x2="824.29" y1="309.535" y2="309.535"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="611.63" y="306.524">10</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="197.78" x="622.79" y="306.524">existsClient = createClient(testFileDTO.getClientDTO())</text><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="26.4759" style="stroke:#000000;stroke-width:1.24;" width="108.5" x="775.62" y="333.095"/><polygon fill="#EEEEEE" points="775.62,333.095,814.06,333.095,814.06,338.055,807.86,344.255,775.62,344.255,775.62,333.095" style="stroke:#000000;stroke-width:1.24;"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="10.54" x="783.68" y="342.702">ref</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="94.86" x="783.68" y="355.102">SD_createClient(clientDto)</text><path d="M551.18,367.0109 L589,367.0109 L589,371.9709 L582.8,378.1709 L551.18,378.1709 L551.18,367.0109 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.62;"/><rect fill="none" height="78.3719" style="stroke:#000000;stroke-width:1.24;" width="339.76" x="551.18" y="367.0109"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="9.92" x="560.48" y="375.9979">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.82" font-weight="bold" lengthAdjust="spacing" textLength="120.28" x="598.3" y="375.3307">[client doesn't exist in Client Store]</text><polygon fill="#A80036" points="820.57,389.7669,826.77,392.2469,820.57,394.7269,823.05,392.2469" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="607.29" x2="824.29" y1="392.2469" y2="392.2469"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="611.63" y="389.2359">11</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="100.44" x="622.79" y="389.2359">clientCreation = saveClient()</text><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="26.4759" style="stroke:#000000;stroke-width:1.24;" width="108.5" x="775.62" y="415.8069"/><polygon fill="#EEEEEE" points="775.62,415.8069,814.06,415.8069,814.06,420.7669,807.86,426.9669,775.62,426.9669,775.62,415.8069" style="stroke:#000000;stroke-width:1.24;"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="10.54" x="783.68" y="425.4138">ref</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="57.04" x="802.59" y="437.8138">SD_saveClient()</text><polygon fill="#A80036" points="935.58,461.1008,941.78,463.5808,935.58,466.0608,938.06,463.5808" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="607.29" x2="939.3" y1="463.5808" y2="463.5808"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="611.63" y="460.5698">12</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="87.42" x="622.79" y="460.5698">createTest(TestFileDTO)</text><polygon fill="#A80036" points="1134.6,479.9188,1140.8,482.3988,1134.6,484.8787,1137.08,482.3988" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1138.32" y1="482.3988" y2="482.3988"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="479.3878">13</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="104.16" x="964.72" y="479.3878">clientStore = getClientStore()</text><polygon fill="#A80036" points="1134.6,517.3367,1140.8,519.8167,1134.6,522.2967,1137.08,519.8167" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1138.32" y1="519.8167" y2="519.8167"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="516.8057">14</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="128.34" x="964.72" y="516.8057">testTypeStore = getTestTypeStore()</text><polygon fill="#A80036" points="1134.6,554.7547,1140.8,557.2347,1134.6,559.7147,1137.08,557.2347" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1138.32" y1="557.2347" y2="557.2347"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="554.2237">15</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="137.64" x="964.72" y="554.2237">parameterStore = getParameterStore()</text><polygon fill="#A80036" points="1134.6,592.1727,1140.8,594.6527,1134.6,597.1327,1137.08,594.6527" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1138.32" y1="594.6527" y2="594.6527"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="591.6417">16</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="169.88" x="964.72" y="591.6417">calStore = getClinicalAnalysisLaboratoryStore()</text><polygon fill="#A80036" points="1269.14,629.5906,1275.34,632.0706,1269.14,634.5506,1271.62,632.0706" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1272.86" y1="632.0706" y2="632.0706"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="629.0596">17</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="304.42" x="964.72" y="629.0596">associatedClient = getClientByTinNumber(testFileDTO.getClientDTO().getTinNumber)</text><polygon fill="#A80036" points="1339.82,667.0086,1346.02,669.4886,1339.82,671.9686,1342.3,669.4886" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1343.54" y1="669.4886" y2="669.4886"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="666.4776">18</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="260.4" x="964.72" y="666.4776">selectedTestType = getTestTypeByCode(TestFileDTO.getTestTypeCode)</text><polygon fill="#A80036" points="1419.8,704.4266,1426,706.9066,1419.8,709.3866,1422.28,706.9066" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1423.52" y1="706.9066" y2="706.9066"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="703.8956">19</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="267.22" x="964.72" y="703.8956">selectedParamsList = getParamsByCodes(TestFileDTO.getParamsCodes)</text><polygon fill="#A80036" points="1487.69,741.8445,1493.89,744.3245,1487.69,746.8045,1490.17,744.3245" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1491.41" y1="744.3245" y2="744.3245"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="741.3135">20</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="153.14" x="964.72" y="741.3135">cal = getCalByCode(TestFileDTO.getCalId)</text><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="26.4759" style="stroke:#000000;stroke-width:1.24;" width="111.6" x="889.08" y="767.8845"/><polygon fill="#EEEEEE" points="889.08,767.8845,927.52,767.8845,927.52,772.8445,921.32,779.0445,889.08,779.0445,889.08,767.8845" style="stroke:#000000;stroke-width:1.24;"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="10.54" x="897.14" y="777.4915">ref</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="92.38" x="899.93" y="789.8915">SD_extractDatesFromDto</text><polygon fill="#A80036" points="1134.6,808.8384,1140.8,811.3184,1134.6,813.7984,1137.08,811.3184" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1138.32" y1="811.3184" y2="811.3184"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="808.3074">21</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="93.62" x="964.72" y="808.3074">testStore = getTestStore()</text><polygon fill="#A80036" points="1520.86,827.6564,1527.06,830.1364,1520.86,832.6164,1523.34,830.1364" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1145.14" x2="1524.58" y1="830.1364" y2="830.1364"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="1149.48" y="827.1254">22</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="27.28" x="1160.64" y="827.1254">create()</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="69.44" x="1528.3" y="816.2784"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="60.76" x="1532.64" y="829.629">store:TestStore</text><polygon fill="#A80036" points="1553.72,876.8302,1559.92,879.3102,1553.72,881.7902,1556.2,879.3102" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1557.44" y1="879.3102" y2="879.3102"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="866.1612">23</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="162.44" x="964.72" y="856.0232">test = createTest(nhsCode, associatedClient,</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="216.38" x="967.2" y="866.1612">selectedTestType, selectedParamsList, paramsResults, cal,</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="244.9" x="967.2" y="876.2992">testRegDate, testChemDate, testDiagnosisDate, testValidationDate)</text><polygon fill="#A80036" points="1833.34,915.9241,1839.54,918.4041,1833.34,920.8841,1835.82,918.4041" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1567.36" x2="1837.06" y1="918.4041" y2="918.4041"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="1571.7" y="905.2551">24</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="138.88" x="1582.86" y="895.1171">createTest(nhsCode, associatedClient,</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="216.38" x="1585.34" y="905.2551">selectedTestType, selectedParamsList, paramsResults, cal,</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="244.9" x="1585.34" y="915.3931">testRegDate, testChemDate, testDiagnosisDate, testValidationDate)</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="30.5156" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="28.52" x="1840.78" y="884.2702"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="4.96" x="1852.56" y="897.6207">tt</text><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="19.84" x="1845.12" y="908.5386">:Test</text><line style="stroke:#A80036;stroke-width:0.62;" x1="1859.38" x2="1885.42" y1="937.9438" y2="937.9438"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1885.42" x2="1885.42" y1="937.9438" y2="946.0038"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1860" x2="1885.42" y1="946.0038" y2="946.0038"/><polygon fill="#A80036" points="1866.2,943.5238,1860,946.0038,1866.2,948.4838,1863.72,946.0038" style="stroke:#A80036;stroke-width:0.62;"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="1863.72" y="934.9328">25</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="159.96" x="1874.88" y="934.9328">checkAttributes(NHScode, associatedClient)</text><path d="M1834.58,955.3038 L1879.84,955.3038 L1879.84,960.2638 L1873.64,966.4638 L1834.58,966.4638 L1834.58,955.3038 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.62;"/><rect fill="none" height="96.0516" style="stroke:#000000;stroke-width:1.24;" width="378.82" x="1834.58" y="955.3038"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="17.36" x="1843.88" y="964.2907">loop</text><text fill="#000000" font-family="sans-serif" font-size="6.82" font-weight="bold" lengthAdjust="spacing" textLength="104.78" x="1889.14" y="963.6235">[for each parameter of the list]</text><polygon fill="#A80036" points="2143.96,978.0597,2150.16,980.5397,2143.96,983.0197,2146.44,980.5397" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1859.38" x2="2147.68" y1="980.5397" y2="980.5397"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="1863.72" y="977.5287">26</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="135.16" x="1874.88" y="977.5287">refValue = getRefValueFor(parameter)</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="53.32" x="2151.4" y="966.6817"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="44.64" x="2155.74" y="980.0323">ExternalAPI</text><polygon fill="#A80036" points="2063.36,1006.9575,2069.56,1009.4375,2063.36,1011.9175,2065.84,1009.4375" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1859.38" x2="2067.08" y1="1009.4375" y2="1009.4375"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="1863.72" y="1006.4265">27</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="185.38" x="1874.88" y="1006.4265">testParameter =  create(parameter, result, refValue)</text><rect fill="#FEFECE" filter="url(#fyqucbi38t8eu)" height="19.5978" style="stroke:#A80036;stroke-width:0.9299999999999999;" width="71.92" x="2070.8" y="995.5795"/><text fill="#000000" font-family="sans-serif" font-size="8.68" lengthAdjust="spacing" textLength="63.24" x="2075.14" y="1008.9301">: TestParameter</text><line style="stroke:#A80036;stroke-width:0.62;" x1="1859.38" x2="1885.42" y1="1038.3353" y2="1038.3353"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1885.42" x2="1885.42" y1="1038.3353" y2="1046.3953"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1860" x2="1885.42" y1="1046.3953" y2="1046.3953"/><polygon fill="#A80036" points="1866.2,1043.9153,1860,1046.3953,1866.2,1048.8753,1863.72,1046.3953" style="stroke:#A80036;stroke-width:0.62;"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="1863.72" y="1035.3243">28</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="126.48" x="1874.88" y="1035.3243">testParameters.add(testParameter)</text><line style="stroke:#A80036;stroke-width:0.62;" x1="1859.38" x2="1885.42" y1="1072.6533" y2="1072.6533"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1885.42" x2="1885.42" y1="1072.6533" y2="1080.7133"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1856.28" x2="1885.42" y1="1080.7133" y2="1080.7133"/><polygon fill="#A80036" points="1862.48,1078.2333,1856.28,1080.7133,1862.48,1083.1933,1860,1080.7133" style="stroke:#A80036;stroke-width:0.62;"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="1863.72" y="1069.6423">29</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="119.66" x="1874.88" y="1069.6423">code = generateSequentialCode()</text><path d="M884.74,1086.9133 L922.56,1086.9133 L922.56,1091.8733 L916.36,1098.0733 L884.74,1098.0733 L884.74,1086.9133 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.62;"/><rect fill="none" height="196.2058" style="stroke:#000000;stroke-width:1.24;" width="1077.56" x="884.74" y="1086.9133"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="9.92" x="894.04" y="1095.9003">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.82" font-weight="bold" lengthAdjust="spacing" textLength="116.56" x="931.86" y="1095.233">[testChemDate different than null]</text><line style="stroke:#A80036;stroke-width:0.62;" x1="952.32" x2="978.36" y1="1112.1492" y2="1112.1492"/><line style="stroke:#A80036;stroke-width:0.62;" x1="978.36" x2="978.36" y1="1112.1492" y2="1120.2092"/><line style="stroke:#A80036;stroke-width:0.62;" x1="952.94" x2="978.36" y1="1120.2092" y2="1120.2092"/><polygon fill="#A80036" points="959.14,1117.7292,952.94,1120.2092,959.14,1122.6892,956.66,1120.2092" style="stroke:#A80036;stroke-width:0.62;"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="956.66" y="1109.1382">30</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="90.52" x="967.82" y="1109.1382">sample = createSample()</text><rect fill="#FFFFFF" filter="url(#fyqucbi38t8eu)" height="26.4759" style="stroke:#000000;stroke-width:1.24;" width="111.6" x="889.08" y="1143.7692"/><polygon fill="#EEEEEE" points="889.08,1143.7692,927.52,1143.7692,927.52,1148.7292,921.32,1154.9292,889.08,1154.9292,889.08,1143.7692" style="stroke:#000000;stroke-width:1.24;"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="10.54" x="897.14" y="1153.3762">ref</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="65.72" x="913.26" y="1165.7762">SD_creatSample()</text><polygon fill="#A80036" points="1845.74,1184.7231,1851.94,1187.2031,1845.74,1189.6831,1848.22,1187.2031" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1849.46" y1="1187.2031" y2="1187.2031"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="1184.1921">31</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="61.38" x="964.72" y="1184.1921">test.addSample()</text><line style="stroke:#A80036;stroke-width:0.62;" x1="1862.48" x2="1888.52" y1="1206.0211" y2="1206.0211"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1888.52" x2="1888.52" y1="1206.0211" y2="1214.0811"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1863.1" x2="1888.52" y1="1214.0811" y2="1214.0811"/><polygon fill="#A80036" points="1869.3,1211.6011,1863.1,1214.0811,1869.3,1216.5611,1866.82,1214.0811" style="stroke:#A80036;stroke-width:0.62;"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="1866.82" y="1203.0101">32</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="57.66" x="1877.98" y="1203.0101">validate(sample)</text><line style="stroke:#A80036;stroke-width:0.62;" x1="1862.48" x2="1888.52" y1="1251.4991" y2="1251.4991"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1888.52" x2="1888.52" y1="1251.4991" y2="1259.5591"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1863.1" x2="1888.52" y1="1259.5591" y2="1259.5591"/><polygon fill="#A80036" points="1869.3,1257.0791,1863.1,1259.5591,1869.3,1262.0391,1866.82,1259.5591" style="stroke:#A80036;stroke-width:0.62;"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="1866.82" y="1248.4881">33</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="76.88" x="1877.98" y="1248.4881">samples.add(sample)</text><polygon fill="#A80036" points="1553.72,1298.837,1559.92,1301.317,1553.72,1303.797,1556.2,1301.317" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1557.44" y1="1301.317" y2="1301.317"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="1298.306">34</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="90.52" x="964.72" y="1298.306">result = validateTest(test)</text><polygon fill="#A80036" points="614.11,1317.655,607.91,1320.135,614.11,1322.615,611.63,1320.135" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="610.39" x2="945.5" y1="1320.135" y2="1320.135"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="617.83" y="1317.124">35</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="19.84" x="628.99" y="1317.124">result</text><polygon fill="#A80036" points="935.58,1336.473,941.78,1338.953,935.58,1341.433,938.06,1338.953" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="607.29" x2="939.3" y1="1338.953" y2="1338.953"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="611.63" y="1335.942">36</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="36.58" x="622.79" y="1335.942">saveTest()</text><polygon fill="#A80036" points="1134.6,1355.2909,1140.8,1357.7709,1134.6,1360.2509,1137.08,1357.7709" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1138.32" y1="1357.7709" y2="1357.7709"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="1354.7599">37</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="93.62" x="964.72" y="1354.7599">testStore = getTestStore()</text><polygon fill="#A80036" points="1553.72,1392.7089,1559.92,1395.1889,1553.72,1397.6689,1556.2,1395.1889" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="949.22" x2="1557.44" y1="1395.1889" y2="1395.1889"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="953.56" y="1392.1779">38</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="50.22" x="964.72" y="1392.1779">saveTest(test)</text><line style="stroke:#A80036;stroke-width:0.62;" x1="1567.36" x2="1593.4" y1="1414.0069" y2="1414.0069"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1593.4" x2="1593.4" y1="1414.0069" y2="1422.0669"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1567.98" x2="1593.4" y1="1422.0669" y2="1422.0669"/><polygon fill="#A80036" points="1574.18,1419.5869,1567.98,1422.0669,1574.18,1424.5469,1571.7,1422.0669" style="stroke:#A80036;stroke-width:0.62;"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="1571.7" y="1410.9959">39</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="60.76" x="1582.86" y="1410.9959">validateTest(test)</text><line style="stroke:#A80036;stroke-width:0.62;" x1="1567.36" x2="1593.4" y1="1443.9848" y2="1443.9848"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1593.4" x2="1593.4" y1="1443.9848" y2="1452.0448"/><line style="stroke:#A80036;stroke-width:0.62;" x1="1564.26" x2="1593.4" y1="1452.0448" y2="1452.0448"/><polygon fill="#A80036" points="1570.46,1449.5648,1564.26,1452.0448,1570.46,1454.5248,1567.98,1452.0448" style="stroke:#A80036;stroke-width:0.62;"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="1571.7" y="1440.9738">40</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="47.12" x="1582.86" y="1440.9738">addTest(test)</text><polygon fill="#A80036" points="614.11,1465.2828,607.91,1467.7628,614.11,1470.2428,611.63,1467.7628" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;" x1="610.39" x2="945.5" y1="1467.7628" y2="1467.7628"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="617.83" y="1464.7518">41</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="19.84" x="628.99" y="1464.7518">result</text><polygon fill="#A80036" points="265.05,1484.1008,258.85,1486.5808,265.05,1489.0608,262.57,1486.5808" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:2.0,2.0;" x1="261.33" x2="603.57" y1="1486.5808" y2="1486.5808"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="268.77" y="1483.5698">42</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="19.84" x="279.93" y="1483.5698">result</text><polygon fill="#A80036" points="56.73,1517.3967,50.53,1519.8767,56.73,1522.3567,54.25,1519.8767" style="stroke:#A80036;stroke-width:0.62;"/><line style="stroke:#A80036;stroke-width:0.62;stroke-dasharray:2.0,2.0;" x1="53.01" x2="254.51" y1="1519.8767" y2="1519.8767"/><text fill="#000000" font-family="sans-serif" font-size="8.06" font-weight="bold" lengthAdjust="spacing" textLength="8.68" x="60.45" y="1511.7967">43</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="94.24" x="71.61" y="1506.7278">informs operation success</text><text fill="#000000" font-family="sans-serif" font-size="8.06" lengthAdjust="spacing" textLength="98.58" x="74.09" y="1516.8657">and shows all created tests</text><!--MD5=[887d035b3c05094cd86284a691bc5b7a]
@startuml
autonumber
'hide footbox
actor "Laboratory coordinator" as ADM
participant ":ImportTestUI  " as UI
participant "testFile:TestFileUtils" as TST
participant ":ImportTestController" as CTRL
participant ":RegisterClientController" as CLIENT_CTRL
participant ":CreateFileTestController" as TEST_CTRL
participant ":Company" as PLAT
participant "clientStore\n:ClientStore" as CLIENT_STORE
participant "testTypeStore\n:TestTypeStore" as TEST_TYPE_STORE
participant "parameterStore\n:ParameterStore" as PARAM_STORE
participant "calStore\n:CalStore" as CAL_STORE
participant "store:TestStore" as ORG
participant "tt\n:Test" as TAREFA
participant ": TestParameter" as tp

activate ADM
ADM -> UI : asks to import clinical tests from a CSV file.
activate UI

UI -> CTRL : create()
activate CTRL
CTRL -> CLIENT_CTRL** : createClientCtrl = create()
CTRL -> TEST_CTRL** : createClientCtrl = create()
deactivate CTRL




UI - -> ADM : shows the file chooser and asks to select the file.
deactivate UI

ADM -> UI : selects requested data
activate UI

UI -> TST** : Create()
UI -> TST : List<TestFileDTO>testFileDTO = getTestDataToDto(pathOfFile)
activate TST
deactivate TST
loop for each TestFileDTO of the list

UI -> CTRL : createTestsFromFile(TestFileDTO)
activate CTRL

/'
CTRL -> TEST_LIST** : create()
'/


CTRL -> CLIENT_CTRL : existsClient = createClient(testFileDTO.getClientDTO())
activate CLIENT_CTRL

ref over CLIENT_CTRL
SD_createClient(clientDto)
end
deactivate CLIENT_CTRL

alt client doesn't exist in Client Store
CTRL -> CLIENT_CTRL : clientCreation = saveClient()
activate CLIENT_CTRL
ref over CLIENT_CTRL
SD_saveClient()
end

deactivate CLIENT_CTRL
end
CTRL -> TEST_CTRL : createTest(TestFileDTO)
activate TEST_CTRL

TEST_CTRL -> PLAT : clientStore = getClientStore()
activate PLAT
deactivate PLAT


TEST_CTRL -> PLAT : testTypeStore = getTestTypeStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> PLAT : parameterStore = getParameterStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> PLAT : calStore = getClinicalAnalysisLaboratoryStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> CLIENT_STORE : associatedClient = getClientByTinNumber(testFileDTO.getClientDTO().getTinNumber)
activate CLIENT_STORE
deactivate CLIENT_STORE

TEST_CTRL -> TEST_TYPE_STORE : selectedTestType = getTestTypeByCode(TestFileDTO.getTestTypeCode)
activate TEST_TYPE_STORE
deactivate TEST_TYPE_STORE



TEST_CTRL -> PARAM_STORE : selectedParamsList = getParamsByCodes(TestFileDTO.getParamsCodes)
activate PARAM_STORE
deactivate PARAM_STORE

TEST_CTRL -> CAL_STORE : cal = getCalByCode(TestFileDTO.getCalId)
activate CAL_STORE
deactivate CAL_STORE

ref over TEST_CTRL
SD_extractDatesFromDto
end

TEST_CTRL -> PLAT : testStore = getTestStore()
activate PLAT
PLAT -> ORG** : create()
deactivate PLAT

TEST_CTRL -> ORG : test = createTest(nhsCode, associatedClient,\n selectedTestType, selectedParamsList, paramsResults, cal,\n testRegDate, testChemDate, testDiagnosisDate, testValidationDate)
activate ORG
ORG -> TAREFA** : createTest(nhsCode, associatedClient,\n selectedTestType, selectedParamsList, paramsResults, cal,\n testRegDate, testChemDate, testDiagnosisDate, testValidationDate)

activate TAREFA
TAREFA -> TAREFA : checkAttributes(NHScode, associatedClient)

loop for each parameter of the list
TAREFA -> ExternalAPI** : refValue = getRefValueFor(parameter)
TAREFA -> tp**: testParameter =  create(parameter, result, refValue)
TAREFA -> TAREFA: testParameters.add(testParameter)
end

TAREFA -> TAREFA : code = generateSequentialCode()
deactivate TAREFA

alt testChemDate different than null
TEST_CTRL -> TEST_CTRL : sample = createSample()
ref over TEST_CTRL
SD_creatSample()
end
activate TEST_CTRL
deactivate TEST_CTRL

TEST_CTRL -> TAREFA : test.addSample()
activate TAREFA

TAREFA -> TAREFA : validate(sample)
activate TAREFA
deactivate TAREFA

TAREFA -> TAREFA : samples.add(sample)
activate TAREFA
deactivate TAREFA
deactivate TAREFA
end

TEST_CTRL -> ORG : result = validateTest(test)
TEST_CTRL -> CTRL : result
deactivate TEST_CTRL

deactivate TEST_CTRL
deactivate ORG

CTRL -> TEST_CTRL : saveTest()
activate TEST_CTRL

TEST_CTRL -> PLAT : testStore = getTestStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> ORG : saveTest(test)
activate ORG

ORG -> ORG: validateTest(test)
ORG -> ORG: addTest(test)
deactivate ORG

TEST_CTRL -> CTRL : result
deactivate TEST_CTRL


CTRL - -> UI: result
deactivate CTRL
end


UI - -> ADM : informs operation success\n and shows all created tests
deactivate ORG
deactivate CTRL
deactivate UI

deactivate ADM

@enduml

@startuml
autonumber
actor "Laboratory coordinator" as ADM
participant ":ImportTestUI  " as UI
participant "testFile:TestFileUtils" as TST
participant ":ImportTestController" as CTRL
participant ":RegisterClientController" as CLIENT_CTRL
participant ":CreateFileTestController" as TEST_CTRL
participant ":Company" as PLAT
participant "clientStore\n:ClientStore" as CLIENT_STORE
participant "testTypeStore\n:TestTypeStore" as TEST_TYPE_STORE
participant "parameterStore\n:ParameterStore" as PARAM_STORE
participant "calStore\n:CalStore" as CAL_STORE
participant "store:TestStore" as ORG
participant "tt\n:Test" as TAREFA
participant ": TestParameter" as tp

activate ADM
ADM -> UI : asks to import clinical tests from a CSV file.
activate UI

UI -> CTRL : create()
activate CTRL
CTRL -> CLIENT_CTRL** : createClientCtrl = create()
CTRL -> TEST_CTRL** : createClientCtrl = create()
deactivate CTRL




UI - -> ADM : shows the file chooser and asks to select the file.
deactivate UI

ADM -> UI : selects requested data
activate UI

UI -> TST** : Create()
UI -> TST : List<TestFileDTO>testFileDTO = getTestDataToDto(pathOfFile)
activate TST
deactivate TST
loop for each TestFileDTO of the list

UI -> CTRL : createTestsFromFile(TestFileDTO)
activate CTRL



CTRL -> CLIENT_CTRL : existsClient = createClient(testFileDTO.getClientDTO())
activate CLIENT_CTRL

ref over CLIENT_CTRL
SD_createClient(clientDto)
end
deactivate CLIENT_CTRL

alt client doesn't exist in Client Store
CTRL -> CLIENT_CTRL : clientCreation = saveClient()
activate CLIENT_CTRL
ref over CLIENT_CTRL
SD_saveClient()
end

deactivate CLIENT_CTRL
end
CTRL -> TEST_CTRL : createTest(TestFileDTO)
activate TEST_CTRL

TEST_CTRL -> PLAT : clientStore = getClientStore()
activate PLAT
deactivate PLAT


TEST_CTRL -> PLAT : testTypeStore = getTestTypeStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> PLAT : parameterStore = getParameterStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> PLAT : calStore = getClinicalAnalysisLaboratoryStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> CLIENT_STORE : associatedClient = getClientByTinNumber(testFileDTO.getClientDTO().getTinNumber)
activate CLIENT_STORE
deactivate CLIENT_STORE

TEST_CTRL -> TEST_TYPE_STORE : selectedTestType = getTestTypeByCode(TestFileDTO.getTestTypeCode)
activate TEST_TYPE_STORE
deactivate TEST_TYPE_STORE



TEST_CTRL -> PARAM_STORE : selectedParamsList = getParamsByCodes(TestFileDTO.getParamsCodes)
activate PARAM_STORE
deactivate PARAM_STORE

TEST_CTRL -> CAL_STORE : cal = getCalByCode(TestFileDTO.getCalId)
activate CAL_STORE
deactivate CAL_STORE

ref over TEST_CTRL
SD_extractDatesFromDto
end

TEST_CTRL -> PLAT : testStore = getTestStore()
activate PLAT
PLAT -> ORG** : create()
deactivate PLAT

TEST_CTRL -> ORG : test = createTest(nhsCode, associatedClient,\n selectedTestType, selectedParamsList, paramsResults, cal,\n testRegDate, testChemDate, testDiagnosisDate, testValidationDate)
activate ORG
ORG -> TAREFA** : createTest(nhsCode, associatedClient,\n selectedTestType, selectedParamsList, paramsResults, cal,\n testRegDate, testChemDate, testDiagnosisDate, testValidationDate)

activate TAREFA
TAREFA -> TAREFA : checkAttributes(NHScode, associatedClient)

loop for each parameter of the list
TAREFA -> ExternalAPI** : refValue = getRefValueFor(parameter)
TAREFA -> tp**: testParameter =  create(parameter, result, refValue)
TAREFA -> TAREFA: testParameters.add(testParameter)
end

TAREFA -> TAREFA : code = generateSequentialCode()
deactivate TAREFA

alt testChemDate different than null
TEST_CTRL -> TEST_CTRL : sample = createSample()
ref over TEST_CTRL
SD_creatSample()
end
activate TEST_CTRL
deactivate TEST_CTRL

TEST_CTRL -> TAREFA : test.addSample()
activate TAREFA

TAREFA -> TAREFA : validate(sample)
activate TAREFA
deactivate TAREFA

TAREFA -> TAREFA : samples.add(sample)
activate TAREFA
deactivate TAREFA
deactivate TAREFA
end

TEST_CTRL -> ORG : result = validateTest(test)
TEST_CTRL -> CTRL : result
deactivate TEST_CTRL

deactivate TEST_CTRL
deactivate ORG

CTRL -> TEST_CTRL : saveTest()
activate TEST_CTRL

TEST_CTRL -> PLAT : testStore = getTestStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> ORG : saveTest(test)
activate ORG

ORG -> ORG: validateTest(test)
ORG -> ORG: addTest(test)
deactivate ORG

TEST_CTRL -> CTRL : result
deactivate TEST_CTRL


CTRL - -> UI: result
deactivate CTRL
end


UI - -> ADM : informs operation success\n and shows all created tests
deactivate ORG
deactivate CTRL
deactivate UI

deactivate ADM

@enduml

PlantUML version 1.2021.00(Sun Jan 10 10:25:05 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: BR
--></g></svg>