<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2182.83px" preserveAspectRatio="none" style="width:3295px;height:2182px;" version="1.1" viewBox="0 0 3295 2182" width="3295.56px" zoomAndPan="magnify"><defs><filter height="300%" id="f139aydkbmvwi6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.74"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.48" dy="3.48" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="2006.8385" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="65.685" y="86.6602"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="133.912" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="353.655" y="106.106"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="1827.0748" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="353.655" y="266.4239"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="706.005" y="333.3799"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="66.956" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="843.465" y="132.5119"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="1638.8353" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="843.465" y="407.9416"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1161.885" y="434.3475"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1161.885" y="550.4109"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="914.438" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1323.27" y="650.5085"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="202.4993" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1323.27" y="1591.3523"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="200.1136" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1323.27" y="1820.2575"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1602.54" y="676.9144"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1602.54" y="729.4202"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1602.54" y="781.9261"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1602.54" y="834.432"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.4059" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1602.54" y="1138.463"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1602.54" y="1617.7582"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1791.33" y="886.9378"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1890.51" y="939.4437"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2002.74" y="991.9495"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2098.005" y="1044.4554"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2220.24" y="1909.2694"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2220.24" y="1961.7752"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="331.0758" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2359.44" y="1233.8707"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="69.3417" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2359.44" y="1692.0141"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="208.6165" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2769.21" y="1297.4283"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="1681.207" style="stroke:#000000;stroke-width:1.74;" width="2981.49" x="301.89" y="372.5299"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="109.9734" style="stroke:#000000;stroke-width:1.74;" width="476.76" x="773.43" y="514.9992"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="134.782" style="stroke:#000000;stroke-width:1.74;" width="531.57" x="2743.11" y="1340.5069"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="161.5277" style="stroke:#000000;stroke-width:1.74;" width="1071.84" x="1241.49" y="1833.3075"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="69.6" x2="69.6" y1="77.9602" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="357.57" x2="357.57" y1="77.9602" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="709.92" x2="709.92" y1="302.359" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="847.38" x2="847.38" y1="77.9602" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="1165.8" x2="1165.8" y1="168.447" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="1327.62" x2="1327.62" y1="208.9971" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="1606.89" x2="1606.89" y1="77.9602" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="1795.68" x2="1795.68" y1="77.9602" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="1894.86" x2="1894.86" y1="77.9602" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="2007.09" x2="2007.09" y1="77.9602" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="2101.92" x2="2101.92" y1="77.9602" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="2224.59" x2="2224.59" y1="1878.2484" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="2363.79" x2="2363.79" y1="1174.398" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="2773.56" x2="2773.56" y1="1277.4659" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="3126.78" x2="3126.78" y1="1425.998" y2="2109.1587"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:5.0,5.0;" x1="3226.83" x2="3226.83" y1="1385.4478" y2="2109.1587"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="126.15" x="4.35" y="75.2839">Laboratory coordinator</text><ellipse cx="70.035" cy="13.05" fill="#FEFECE" filter="url(#f139aydkbmvwi6)" rx="6.96" ry="6.96" style="stroke:#A80036;stroke-width:1.74;"/><path d="M70.035,20.01 L70.035,43.5 M58.725,26.97 L81.345,26.97 M70.035,43.5 L58.725,56.55 M70.035,43.5 L81.345,56.55 " fill="none" filter="url(#f139aydkbmvwi6)" style="stroke:#A80036;stroke-width:1.74;"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="126.15" x="4.35" y="2120.9326">Laboratory coordinator</text><ellipse cx="70.035" cy="2132.3088" fill="#FEFECE" filter="url(#f139aydkbmvwi6)" rx="6.96" ry="6.96" style="stroke:#A80036;stroke-width:1.74;"/><path d="M70.035,2139.2688 L70.035,2162.7588 M58.725,2146.2288 L81.345,2146.2288 M70.035,2162.7588 L58.725,2175.8088 M70.035,2162.7588 L81.345,2175.8088 " fill="none" filter="url(#f139aydkbmvwi6)" style="stroke:#A80036;stroke-width:1.74;"/><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="91.35" x="310.59" y="46.11"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="72.21" x="316.68" y="64.8439">:ImportTestUI</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="91.35" x="310.59" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="72.21" x="316.68" y="2127.0226">:ImportTestUI</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="122.67" x="647.28" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="110.49" x="653.37" y="2127.0226">testFile:TestFileUtils</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="127.89" x="782.13" y="46.11"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="115.71" x="788.22" y="64.8439">:ImportTestController</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="127.89" x="782.13" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="115.71" x="788.22" y="2127.0226">:ImportTestController</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="147.03" x="1090.98" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="134.85" x="1097.07" y="2127.0226">:RegisterClientController</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="151.38" x="1250.19" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="139.2" x="1256.28" y="2127.0226">:CreateFileTestController</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="67.86" x="1571.22" y="46.11"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="55.68" x="1577.31" y="64.8439">:Company</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="67.86" x="1571.22" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="55.68" x="1577.31" y="2127.0226">:Company</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="42.8203" style="stroke:#A80036;stroke-width:1.305;" width="76.56" x="1755.66" y="30.7898"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="58.29" x="1764.795" y="49.5237">clientStore</text><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="64.38" x="1761.75" y="64.8439">:ClientStore</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="42.8203" style="stroke:#A80036;stroke-width:1.305;" width="76.56" x="1755.66" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="58.29" x="1764.795" y="2127.0226">clientStore</text><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="64.38" x="1761.75" y="2142.3427">:ClientStore</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="42.8203" style="stroke:#A80036;stroke-width:1.305;" width="97.44" x="1844.4" y="30.7898"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="77.43" x="1854.405" y="49.5237">testTypeStore</text><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="85.26" x="1850.49" y="64.8439">:TestTypeStore</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="42.8203" style="stroke:#A80036;stroke-width:1.305;" width="97.44" x="1844.4" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="77.43" x="1854.405" y="2127.0226">testTypeStore</text><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="85.26" x="1850.49" y="2142.3427">:TestTypeStore</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="42.8203" style="stroke:#A80036;stroke-width:1.305;" width="102.66" x="1954.02" y="30.7898"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="86.13" x="1962.285" y="49.5237">parameterStore</text><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="90.48" x="1960.11" y="64.8439">:ParameterStore</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="42.8203" style="stroke:#A80036;stroke-width:1.305;" width="102.66" x="1954.02" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="86.13" x="1962.285" y="2127.0226">parameterStore</text><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="90.48" x="1960.11" y="2142.3427">:ParameterStore</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="42.8203" style="stroke:#A80036;stroke-width:1.305;" width="63.51" x="2068.86" y="30.7898"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="45.24" x="2077.995" y="49.5237">calStore</text><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="51.33" x="2074.95" y="64.8439">:CalStore</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="42.8203" style="stroke:#A80036;stroke-width:1.305;" width="63.51" x="2068.86" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="45.24" x="2077.995" y="2127.0226">calStore</text><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="51.33" x="2074.95" y="2142.3427">:CalStore</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="156.6" x="2144.55" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="144.42" x="2150.64" y="2127.0226">:RecordSamplesController</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="97.44" x="2313.33" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="85.26" x="2319.42" y="2127.0226">store:TestStore</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="42.8203" style="stroke:#A80036;stroke-width:1.305;" width="40.02" x="2751.81" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="6.96" x="2768.34" y="2127.0226">tt</text><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="27.84" x="2757.9" y="2142.3427">:Test</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="100.92" x="3074.58" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="88.74" x="3080.67" y="2127.0226">: TestParameter</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="74.82" x="3187.68" y="2108.2887"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="62.64" x="3193.77" y="2127.0226">ExternalAPI</text><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="2006.8385" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="65.685" y="86.6602"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="133.912" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="353.655" y="106.106"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="1827.0748" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="353.655" y="266.4239"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="706.005" y="333.3799"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="66.956" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="843.465" y="132.5119"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="1638.8353" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="843.465" y="407.9416"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1161.885" y="434.3475"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1161.885" y="550.4109"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="914.438" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1323.27" y="650.5085"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="202.4993" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1323.27" y="1591.3523"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="200.1136" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1323.27" y="1820.2575"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1602.54" y="676.9144"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1602.54" y="729.4202"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1602.54" y="781.9261"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1602.54" y="834.432"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.4059" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1602.54" y="1138.463"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1602.54" y="1617.7582"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1791.33" y="886.9378"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="1890.51" y="939.4437"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2002.74" y="991.9495"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2098.005" y="1044.4554"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2220.24" y="1909.2694"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="26.1" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2220.24" y="1961.7752"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="331.0758" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2359.44" y="1233.8707"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="69.3417" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2359.44" y="1692.0141"/><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="208.6165" style="stroke:#A80036;stroke-width:0.87;" width="8.7" x="2769.21" y="1297.4283"/><polygon fill="#A80036" points="343.215,102.626,351.915,106.106,343.215,109.586,346.695,106.106" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="74.385" x2="348.435" y1="106.106" y2="106.106"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="6.09" x="80.475" y="101.8809">1</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="221.85" x="90.045" y="101.8809">asks to import clinical tests from a CSV file.</text><polygon fill="#A80036" points="833.025,129.0319,841.725,132.5119,833.025,135.9919,836.505,132.5119" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="362.355" x2="838.245" y1="132.5119" y2="132.5119"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="6.09" x="368.445" y="128.2868">2</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="38.28" x="378.015" y="128.2868">create()</text><polygon fill="#A80036" points="1080.54,155.4377,1089.24,158.9177,1080.54,162.3977,1084.02,158.9177" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="852.165" x2="1085.76" y1="158.9177" y2="158.9177"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="6.09" x="858.255" y="154.6926">3</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="129.63" x="867.825" y="154.6926">createClientCtrl = create()</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="147.03" x="1090.98" y="139.4719"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="134.85" x="1097.07" y="158.2058">:RegisterClientController</text><polygon fill="#A80036" points="1239.75,195.9879,1248.45,199.4679,1239.75,202.9479,1243.23,199.4679" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="847.815" x2="1244.97" y1="199.4679" y2="199.4679"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="6.09" x="853.905" y="195.2428">4</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="129.63" x="863.475" y="195.2428">createClientCtrl = create()</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="151.38" x="1250.19" y="180.022"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="139.2" x="1256.28" y="198.7559">:CreateFileTestController</text><polygon fill="#A80036" points="83.955,236.538,75.255,240.018,83.955,243.498,80.475,240.018" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:2.0,2.0;" x1="78.735" x2="357.135" y1="240.018" y2="240.018"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="6.09" x="89.175" y="235.7929">5</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="248.82" x="98.745" y="235.7929">shows the file chooser and asks to select the file.</text><polygon fill="#A80036" points="343.215,262.9439,351.915,266.4239,343.215,269.9039,346.695,266.4239" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="74.385" x2="348.435" y1="266.4239" y2="266.4239"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="6.09" x="80.475" y="262.1988">6</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="114.84" x="90.045" y="262.1988">selects requested data</text><polygon fill="#A80036" points="636.84,289.3498,645.54,292.8298,636.84,296.3098,640.32,292.8298" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="362.355" x2="642.06" y1="292.8298" y2="292.8298"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="6.09" x="368.445" y="288.6047">7</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="40.02" x="378.015" y="288.6047">Create()</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="122.67" x="647.28" y="273.3839"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="110.49" x="653.37" y="292.1178">testFile:TestFileUtils</text><polygon fill="#A80036" points="695.565,329.8999,704.265,333.3799,695.565,336.8599,699.045,333.3799" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="362.355" x2="700.785" y1="333.3799" y2="333.3799"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="6.09" x="368.445" y="329.1548">8</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="317.55" x="378.015" y="329.1548">List&lt;TestFileDTO&gt;testFileDTO = getTestDataToDto(pathOfFile)</text><path d="M301.89,372.5299 L365.4,372.5299 L365.4,379.4899 L356.7,388.1899 L301.89,388.1899 L301.89,372.5299 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.87;"/><rect fill="none" height="1681.207" style="stroke:#000000;stroke-width:1.74;" width="2981.49" x="301.89" y="372.5299"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="24.36" x="314.94" y="385.1407">loop</text><text fill="#000000" font-family="sans-serif" font-size="9.57" font-weight="bold" lengthAdjust="spacing" textLength="153.99" x="378.45" y="384.2044">[for each TestFileDTO of the list]</text><polygon fill="#A80036" points="833.025,404.4616,841.725,407.9416,833.025,411.4216,836.505,407.9416" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="362.355" x2="838.245" y1="407.9416" y2="407.9416"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="6.09" x="368.445" y="403.7165">9</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="173.13" x="378.015" y="403.7165">createTestsFromFile(TestFileDTO)</text><polygon fill="#A80036" points="1151.445,430.8675,1160.145,434.3475,1151.445,437.8275,1154.925,434.3475" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="852.165" x2="1156.665" y1="434.3475" y2="434.3475"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="858.255" y="430.1224">10</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="277.53" x="873.915" y="430.1224">existsClient = createClient(testFileDTO.getClientDTO())</text><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="37.1517" style="stroke:#000000;stroke-width:1.74;" width="152.25" x="1088.37" y="467.4075"/><polygon fill="#EEEEEE" points="1088.37,467.4075,1142.31,467.4075,1142.31,474.3675,1133.61,483.0675,1088.37,483.0675,1088.37,467.4075" style="stroke:#000000;stroke-width:1.74;"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="14.79" x="1099.68" y="480.8883">ref</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="133.11" x="1099.68" y="498.2883">SD_createClient(clientDto)</text><path d="M773.43,514.9992 L826.5,514.9992 L826.5,521.9592 L817.8,530.6592 L773.43,530.6592 L773.43,514.9992 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.87;"/><rect fill="none" height="109.9734" style="stroke:#000000;stroke-width:1.74;" width="476.76" x="773.43" y="514.9992"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="13.92" x="786.48" y="527.61">alt</text><text fill="#000000" font-family="sans-serif" font-size="9.57" font-weight="bold" lengthAdjust="spacing" textLength="168.78" x="839.55" y="526.6737">[client doesn't exist in Client Store]</text><polygon fill="#A80036" points="1151.445,546.9309,1160.145,550.4109,1151.445,553.8909,1154.925,550.4109" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="852.165" x2="1156.665" y1="550.4109" y2="550.4109"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="858.255" y="546.1858">11</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="140.94" x="873.915" y="546.1858">clientCreation = saveClient()</text><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="37.1517" style="stroke:#000000;stroke-width:1.74;" width="152.25" x="1088.37" y="583.4709"/><polygon fill="#EEEEEE" points="1088.37,583.4709,1142.31,583.4709,1142.31,590.4309,1133.61,599.1309,1088.37,599.1309,1088.37,583.4709" style="stroke:#000000;stroke-width:1.74;"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="14.79" x="1099.68" y="596.9517">ref</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="80.04" x="1126.215" y="614.3517">SD_saveClient()</text><polygon fill="#A80036" points="1312.83,647.0285,1321.53,650.5085,1312.83,653.9885,1316.31,650.5085" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="852.165" x2="1318.05" y1="650.5085" y2="650.5085"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="858.255" y="646.2834">12</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="122.67" x="873.915" y="646.2834">createTest(TestFileDTO)</text><polygon fill="#A80036" points="1592.1,673.4344,1600.8,676.9144,1592.1,680.3944,1595.58,676.9144" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="1597.32" y1="676.9144" y2="676.9144"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="672.6893">13</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="146.16" x="1353.72" y="672.6893">clientStore = getClientStore()</text><polygon fill="#A80036" points="1592.1,725.9402,1600.8,729.4202,1592.1,732.9002,1595.58,729.4202" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="1597.32" y1="729.4202" y2="729.4202"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="725.1951">14</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="180.09" x="1353.72" y="725.1951">testTypeStore = getTestTypeStore()</text><polygon fill="#A80036" points="1592.1,778.4461,1600.8,781.9261,1592.1,785.4061,1595.58,781.9261" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="1597.32" y1="781.9261" y2="781.9261"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="777.701">15</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="193.14" x="1353.72" y="777.701">parameterStore = getParameterStore()</text><polygon fill="#A80036" points="1592.1,830.952,1600.8,834.432,1592.1,837.912,1595.58,834.432" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="1597.32" y1="834.432" y2="834.432"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="830.2068">16</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="238.38" x="1353.72" y="830.2068">calStore = getClinicalAnalysisLaboratoryStore()</text><polygon fill="#A80036" points="1780.89,883.4578,1789.59,886.9378,1780.89,890.4178,1784.37,886.9378" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="1786.11" y1="886.9378" y2="886.9378"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="882.7127">17</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="427.17" x="1353.72" y="882.7127">associatedClient = getClientByTinNumber(testFileDTO.getClientDTO().getTinNumber)</text><polygon fill="#A80036" points="1880.07,935.9637,1888.77,939.4437,1880.07,942.9237,1883.55,939.4437" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="1885.29" y1="939.4437" y2="939.4437"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="935.2186">18</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="365.4" x="1353.72" y="935.2186">selectedTestType = getTestTypeByCode(TestFileDTO.getTestTypeCode)</text><polygon fill="#A80036" points="1992.3,988.4695,2001,991.9495,1992.3,995.4295,1995.78,991.9495" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="1997.52" y1="991.9495" y2="991.9495"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="987.7244">19</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="374.97" x="1353.72" y="987.7244">selectedParamsList = getParamsByCodes(TestFileDTO.getParamsCodes)</text><polygon fill="#A80036" points="2087.565,1040.9754,2096.265,1044.4554,2087.565,1047.9354,2091.045,1044.4554" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="2092.785" y1="1044.4554" y2="1044.4554"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="1040.2303">20</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="214.89" x="1353.72" y="1040.2303">cal = getCalByCode(TestFileDTO.getCalId)</text><rect fill="#FFFFFF" filter="url(#f139aydkbmvwi6)" height="37.1517" style="stroke:#000000;stroke-width:1.74;" width="156.6" x="1247.58" y="1077.5154"/><polygon fill="#EEEEEE" points="1247.58,1077.5154,1301.52,1077.5154,1301.52,1084.4754,1292.82,1093.1754,1247.58,1093.1754,1247.58,1077.5154" style="stroke:#000000;stroke-width:1.74;"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="14.79" x="1258.89" y="1090.9961">ref</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="129.63" x="1262.805" y="1108.3961">SD_extractDatesFromDto</text><polygon fill="#A80036" points="1592.1,1134.983,1600.8,1138.463,1592.1,1141.943,1595.58,1138.463" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="1597.32" y1="1138.463" y2="1138.463"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="1134.2379">21</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="131.37" x="1353.72" y="1134.2379">testStore = getTestStore()</text><polygon fill="#A80036" points="2302.89,1161.3888,2311.59,1164.8688,2302.89,1168.3488,2306.37,1164.8688" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1606.89" x2="2308.11" y1="1164.8688" y2="1164.8688"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1612.98" y="1160.6437">22</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="38.28" x="1628.64" y="1160.6437">create()</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="97.44" x="2313.33" y="1145.423"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="85.26" x="2319.42" y="1164.1569">store:TestStore</text><polygon fill="#A80036" points="2349,1230.3907,2357.7,1233.8707,2349,1237.3507,2352.48,1233.8707" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="2354.22" y1="1233.8707" y2="1233.8707"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="1215.4197">23</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="227.94" x="1353.72" y="1201.1939">test = createTest(nhsCode, associatedClient,</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="303.63" x="1357.2" y="1215.4197">selectedTestType, selectedParamsList, paramsResults, cal,</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="343.65" x="1357.2" y="1229.6456">testRegDate, testChemDate, testDiagnosisDate, testValidationDate)</text><polygon fill="#A80036" points="2741.37,1285.2483,2750.07,1288.7283,2741.37,1292.2083,2744.85,1288.7283" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2368.14" x2="2746.59" y1="1288.7283" y2="1288.7283"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="2374.23" y="1270.2773">24</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="194.88" x="2389.89" y="1256.0515">createTest(nhsCode, associatedClient,</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="303.63" x="2393.37" y="1270.2773">selectedTestType, selectedParamsList, paramsResults, cal,</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="343.65" x="2393.37" y="1284.5032">testRegDate, testChemDate, testDiagnosisDate, testValidationDate)</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="42.8203" style="stroke:#A80036;stroke-width:1.305;" width="40.02" x="2751.81" y="1240.8307"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="6.96" x="2768.34" y="1259.5646">tt</text><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="27.84" x="2757.9" y="1274.8847">:Test</text><line style="stroke:#A80036;stroke-width:0.87;" x1="2777.91" x2="2814.45" y1="1316.1469" y2="1316.1469"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2814.45" x2="2814.45" y1="1316.1469" y2="1327.4569"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2778.78" x2="2814.45" y1="1327.4569" y2="1327.4569"/><polygon fill="#A80036" points="2787.48,1323.9769,2778.78,1327.4569,2787.48,1330.9369,2784,1327.4569" style="stroke:#A80036;stroke-width:0.87;"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="2784" y="1311.9218">25</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="224.46" x="2799.66" y="1311.9218">checkAttributes(NHScode, associatedClient)</text><path d="M2743.11,1340.5069 L2806.62,1340.5069 L2806.62,1347.4669 L2797.92,1356.1669 L2743.11,1356.1669 L2743.11,1340.5069 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.87;"/><rect fill="none" height="134.782" style="stroke:#000000;stroke-width:1.74;" width="531.57" x="2743.11" y="1340.5069"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="24.36" x="2756.16" y="1353.1176">loop</text><text fill="#000000" font-family="sans-serif" font-size="9.57" font-weight="bold" lengthAdjust="spacing" textLength="147.03" x="2819.67" y="1352.1814">[for each parameter of the list]</text><polygon fill="#A80036" points="3177.24,1372.4386,3185.94,1375.9186,3177.24,1379.3986,3180.72,1375.9186" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2777.91" x2="3182.46" y1="1375.9186" y2="1375.9186"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="2784" y="1371.6935">26</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="189.66" x="2799.66" y="1371.6935">refValue = getRefValueFor(parameter)</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="74.82" x="3187.68" y="1356.4727"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="62.64" x="3193.77" y="1375.2066">ExternalAPI</text><polygon fill="#A80036" points="3064.14,1412.9888,3072.84,1416.4688,3064.14,1419.9488,3067.62,1416.4688" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2777.91" x2="3069.36" y1="1416.4688" y2="1416.4688"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="2784" y="1412.2436">27</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="260.13" x="2799.66" y="1412.2436">testParameter =  create(parameter, result, refValue)</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="100.92" x="3074.58" y="1397.0229"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="88.74" x="3080.67" y="1415.7568">: TestParameter</text><line style="stroke:#A80036;stroke-width:0.87;" x1="2777.91" x2="2814.45" y1="1457.0189" y2="1457.0189"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2814.45" x2="2814.45" y1="1457.0189" y2="1468.3289"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2778.78" x2="2814.45" y1="1468.3289" y2="1468.3289"/><polygon fill="#A80036" points="2787.48,1464.8489,2778.78,1468.3289,2787.48,1471.8089,2784,1468.3289" style="stroke:#A80036;stroke-width:0.87;"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="2784" y="1452.7938">28</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="177.48" x="2799.66" y="1452.7938">testParameters.add(testParameter)</text><line style="stroke:#A80036;stroke-width:0.87;" x1="2777.91" x2="2814.45" y1="1505.1748" y2="1505.1748"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2814.45" x2="2814.45" y1="1505.1748" y2="1516.4848"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2773.56" x2="2814.45" y1="1516.4848" y2="1516.4848"/><polygon fill="#A80036" points="2782.26,1513.0048,2773.56,1516.4848,2782.26,1519.9648,2778.78,1516.4848" style="stroke:#A80036;stroke-width:0.87;"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="2784" y="1500.9497">29</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="167.91" x="2799.66" y="1500.9497">code = generateSequentialCode()</text><polygon fill="#A80036" points="2349,1535.0606,2357.7,1538.5406,2349,1542.0206,2352.48,1538.5406" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="2354.22" y1="1538.5406" y2="1538.5406"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="1534.3155">30</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="127.02" x="1353.72" y="1534.3155">result = validateTest(test)</text><polygon fill="#A80036" points="861.735,1561.4665,853.035,1564.9465,861.735,1568.4265,858.255,1564.9465" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="856.515" x2="1326.75" y1="1564.9465" y2="1564.9465"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="866.955" y="1560.7214">31</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="27.84" x="882.615" y="1560.7214">result</text><polygon fill="#A80036" points="1312.83,1587.8723,1321.53,1591.3523,1312.83,1594.8323,1316.31,1591.3523" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="852.165" x2="1318.05" y1="1591.3523" y2="1591.3523"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="858.255" y="1587.1272">32</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="51.33" x="873.915" y="1587.1272">saveTest()</text><polygon fill="#A80036" points="1592.1,1614.2782,1600.8,1617.7582,1592.1,1621.2382,1595.58,1617.7582" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="1597.32" y1="1617.7582" y2="1617.7582"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="1613.5331">33</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="131.37" x="1353.72" y="1613.5331">testStore = getTestStore()</text><polygon fill="#A80036" points="2349,1688.5341,2357.7,1692.0141,2349,1695.4941,2352.48,1692.0141" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="2354.22" y1="1692.0141" y2="1692.0141"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="1687.789">34</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="70.47" x="1353.72" y="1687.789">saveTest(test)</text><line style="stroke:#A80036;stroke-width:0.87;" x1="2368.14" x2="2404.68" y1="1718.4199" y2="1718.4199"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2404.68" x2="2404.68" y1="1718.4199" y2="1729.7299"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2369.01" x2="2404.68" y1="1729.7299" y2="1729.7299"/><polygon fill="#A80036" points="2377.71,1726.2499,2369.01,1729.7299,2377.71,1733.2099,2374.23,1729.7299" style="stroke:#A80036;stroke-width:0.87;"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="2374.23" y="1714.1948">35</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="85.26" x="2389.89" y="1714.1948">validateTest(test)</text><line style="stroke:#A80036;stroke-width:0.87;" x1="2368.14" x2="2404.68" y1="1760.4858" y2="1760.4858"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2404.68" x2="2404.68" y1="1760.4858" y2="1771.7958"/><line style="stroke:#A80036;stroke-width:0.87;" x1="2363.79" x2="2404.68" y1="1771.7958" y2="1771.7958"/><polygon fill="#A80036" points="2372.49,1768.3158,2363.79,1771.7958,2372.49,1775.2758,2369.01,1771.7958" style="stroke:#A80036;stroke-width:0.87;"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="2374.23" y="1756.2607">36</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="66.12" x="2389.89" y="1756.2607">addTest(test)</text><polygon fill="#A80036" points="861.735,1790.3716,853.035,1793.8516,861.735,1797.3316,858.255,1793.8516" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="856.515" x2="1326.75" y1="1793.8516" y2="1793.8516"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="866.955" y="1789.6265">37</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="27.84" x="882.615" y="1789.6265">result</text><polygon fill="#A80036" points="1312.83,1816.7775,1321.53,1820.2575,1312.83,1823.7375,1316.31,1820.2575" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="852.165" x2="1318.05" y1="1820.2575" y2="1820.2575"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="858.255" y="1816.0324">38</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="63.51" x="873.915" y="1816.0324">addSample()</text><path d="M1241.49,1833.3075 L1294.56,1833.3075 L1294.56,1840.2675 L1285.86,1848.9675 L1241.49,1848.9675 L1241.49,1833.3075 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.87;"/><rect fill="none" height="161.5277" style="stroke:#000000;stroke-width:1.74;" width="1071.84" x="1241.49" y="1833.3075"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="13.92" x="1254.54" y="1845.9183">alt</text><text fill="#000000" font-family="sans-serif" font-size="9.57" font-weight="bold" lengthAdjust="spacing" textLength="163.56" x="1307.61" y="1844.982">[testChemDate different than null]</text><polygon fill="#A80036" points="2134.11,1865.2392,2142.81,1868.7192,2134.11,1872.1992,2137.59,1868.7192" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="2139.33" y1="1868.7192" y2="1868.7192"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="1864.4941">39</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="38.28" x="1353.72" y="1864.4941">create()</text><rect fill="#FEFECE" filter="url(#f139aydkbmvwi6)" height="27.5002" style="stroke:#A80036;stroke-width:1.305;" width="156.6" x="2144.55" y="1849.2734"/><text fill="#000000" font-family="sans-serif" font-size="12.18" lengthAdjust="spacing" textLength="144.42" x="2150.64" y="1868.0072">:RecordSamplesController</text><polygon fill="#A80036" points="2209.8,1905.7894,2218.5,1909.2694,2209.8,1912.7494,2213.28,1909.2694" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="2215.02" y1="1909.2694" y2="1909.2694"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="1905.0443">40</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="76.56" x="1353.72" y="1905.0443">createSample()</text><polygon fill="#A80036" points="2209.8,1958.2952,2218.5,1961.7752,2209.8,1965.2552,2213.28,1961.7752" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="1331.97" x2="2215.02" y1="1961.7752" y2="1961.7752"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="1338.06" y="1957.5501">41</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="134.85" x="1353.72" y="1957.5501">addSample(test.getCode())</text><polygon fill="#A80036" points="861.735,2016.8911,853.035,2020.3711,861.735,2023.8511,858.255,2020.3711" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;" x1="856.515" x2="1326.75" y1="2020.3711" y2="2020.3711"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="866.955" y="2016.146">42</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="27.84" x="882.615" y="2016.146">result</text><polygon fill="#A80036" points="371.925,2043.297,363.225,2046.777,371.925,2050.257,368.445,2046.777" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:2.0,2.0;" x1="366.705" x2="846.945" y1="2046.777" y2="2046.777"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="377.145" y="2042.5518">43</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="27.84" x="392.805" y="2042.5518">result</text><polygon fill="#A80036" points="79.605,2090.0187,70.905,2093.4987,79.605,2096.9787,76.125,2093.4987" style="stroke:#A80036;stroke-width:0.87;"/><line style="stroke:#A80036;stroke-width:0.87;stroke-dasharray:2.0,2.0;" x1="74.385" x2="357.135" y1="2093.4987" y2="2093.4987"/><text fill="#000000" font-family="sans-serif" font-size="11.31" font-weight="bold" lengthAdjust="spacing" textLength="12.18" x="84.825" y="2082.1606">44</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="132.24" x="100.485" y="2075.0477">informs operation success</text><text fill="#000000" font-family="sans-serif" font-size="11.31" lengthAdjust="spacing" textLength="138.33" x="103.965" y="2089.2736">and shows all created tests</text><!--MD5=[f495117dd36a62a729a218f7a197c13a]
@startuml
autonumber
'hide footbox
actor "Laboratory coordinator" as ADM
participant ":ImportTestUI  " as UI
participant "testFile:TestFileUtils" as TST
participant ":ImportTestController" as CTRL
participant ":RegisterClientController" as CLIENT_CTRL
participant ":CreateFileTestController" as TEST_CTRL
participant ":Company" as PLAT
participant "clientStore\n:ClientStore" as CLIENT_STORE
participant "testTypeStore\n:TestTypeStore" as TEST_TYPE_STORE
participant "parameterStore\n:ParameterStore" as PARAM_STORE
participant "calStore\n:CalStore" as CAL_STORE
participant ":RecordSamplesController" as SAM_CTRL
participant "store:TestStore" as ORG
participant "tt\n:Test" as TAREFA
participant ": TestParameter" as tp

activate ADM
ADM -> UI : asks to import clinical tests from a CSV file.
activate UI

UI -> CTRL : create()
activate CTRL
CTRL -> CLIENT_CTRL** : createClientCtrl = create()
CTRL -> TEST_CTRL** : createClientCtrl = create()
deactivate CTRL




UI - -> ADM : shows the file chooser and asks to select the file.
deactivate UI

ADM -> UI : selects requested data
activate UI

UI -> TST** : Create()
UI -> TST : List<TestFileDTO>testFileDTO = getTestDataToDto(pathOfFile)
activate TST
deactivate TST
loop for each TestFileDTO of the list

UI -> CTRL : createTestsFromFile(TestFileDTO)
activate CTRL

/'
CTRL -> TEST_LIST** : create()
'/


CTRL -> CLIENT_CTRL : existsClient = createClient(testFileDTO.getClientDTO())
activate CLIENT_CTRL

ref over CLIENT_CTRL
SD_createClient(clientDto)
end
deactivate CLIENT_CTRL

alt client doesn't exist in Client Store
CTRL -> CLIENT_CTRL : clientCreation = saveClient()
activate CLIENT_CTRL
ref over CLIENT_CTRL
SD_saveClient()
end

deactivate CLIENT_CTRL
end
CTRL -> TEST_CTRL : createTest(TestFileDTO)
activate TEST_CTRL

TEST_CTRL -> PLAT : clientStore = getClientStore()
activate PLAT
deactivate PLAT


TEST_CTRL -> PLAT : testTypeStore = getTestTypeStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> PLAT : parameterStore = getParameterStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> PLAT : calStore = getClinicalAnalysisLaboratoryStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> CLIENT_STORE : associatedClient = getClientByTinNumber(testFileDTO.getClientDTO().getTinNumber)
activate CLIENT_STORE
deactivate CLIENT_STORE

TEST_CTRL -> TEST_TYPE_STORE : selectedTestType = getTestTypeByCode(TestFileDTO.getTestTypeCode)
activate TEST_TYPE_STORE
deactivate TEST_TYPE_STORE



TEST_CTRL -> PARAM_STORE : selectedParamsList = getParamsByCodes(TestFileDTO.getParamsCodes)
activate PARAM_STORE
deactivate PARAM_STORE

TEST_CTRL -> CAL_STORE : cal = getCalByCode(TestFileDTO.getCalId)
activate CAL_STORE
deactivate CAL_STORE

ref over TEST_CTRL
SD_extractDatesFromDto
end
TEST_CTRL -> PLAT : testStore = getTestStore()
activate PLAT
PLAT -> ORG** : create()
deactivate PLAT

TEST_CTRL -> ORG : test = createTest(nhsCode, associatedClient,\n selectedTestType, selectedParamsList, paramsResults, cal,\n testRegDate, testChemDate, testDiagnosisDate, testValidationDate)
activate ORG
ORG -> TAREFA** : createTest(nhsCode, associatedClient,\n selectedTestType, selectedParamsList, paramsResults, cal,\n testRegDate, testChemDate, testDiagnosisDate, testValidationDate)


activate TAREFA
TAREFA -> TAREFA : checkAttributes(NHScode, associatedClient)



loop for each parameter of the list
TAREFA -> ExternalAPI** : refValue = getRefValueFor(parameter)
TAREFA -> tp**: testParameter =  create(parameter, result, refValue)
TAREFA -> TAREFA: testParameters.add(testParameter)
end

TAREFA -> TAREFA : code = generateSequentialCode()
deactivate TAREFA



TEST_CTRL -> ORG : result = validateTest(test)
TEST_CTRL -> CTRL : result
deactivate TEST_CTRL

deactivate TEST_CTRL
deactivate ORG

CTRL -> TEST_CTRL : saveTest()
activate TEST_CTRL

TEST_CTRL -> PLAT : testStore = getTestStore()
activate PLAT
|||
deactivate PLAT

TEST_CTRL -> ORG : saveTest(test)
activate ORG

ORG -> ORG: validateTest(test)
ORG -> ORG: addTest(test)
deactivate ORG

TEST_CTRL -> CTRL : result
deactivate TEST_CTRL


CTRL -> TEST_CTRL : addSample()
activate TEST_CTRL
alt testChemDate different than null
TEST_CTRL -> SAM_CTRL** : create()
TEST_CTRL -> SAM_CTRL : createSample()
activate SAM_CTRL
deactivate SAM_CTRL

TEST_CTRL -> SAM_CTRL : addSample(test.getCode())
activate SAM_CTRL
deactivate SAM_CTRL
end
TEST_CTRL -> CTRL : result
deactivate TEST_CTRL


CTRL - -> UI: result
deactivate CTRL
end


UI - -> ADM : informs operation success\n and shows all created tests
deactivate ORG
deactivate CTRL
deactivate UI

deactivate ADM

@enduml

@startuml
autonumber
actor "Laboratory coordinator" as ADM
participant ":ImportTestUI  " as UI
participant "testFile:TestFileUtils" as TST
participant ":ImportTestController" as CTRL
participant ":RegisterClientController" as CLIENT_CTRL
participant ":CreateFileTestController" as TEST_CTRL
participant ":Company" as PLAT
participant "clientStore\n:ClientStore" as CLIENT_STORE
participant "testTypeStore\n:TestTypeStore" as TEST_TYPE_STORE
participant "parameterStore\n:ParameterStore" as PARAM_STORE
participant "calStore\n:CalStore" as CAL_STORE
participant ":RecordSamplesController" as SAM_CTRL
participant "store:TestStore" as ORG
participant "tt\n:Test" as TAREFA
participant ": TestParameter" as tp

activate ADM
ADM -> UI : asks to import clinical tests from a CSV file.
activate UI

UI -> CTRL : create()
activate CTRL
CTRL -> CLIENT_CTRL** : createClientCtrl = create()
CTRL -> TEST_CTRL** : createClientCtrl = create()
deactivate CTRL




UI - -> ADM : shows the file chooser and asks to select the file.
deactivate UI

ADM -> UI : selects requested data
activate UI

UI -> TST** : Create()
UI -> TST : List<TestFileDTO>testFileDTO = getTestDataToDto(pathOfFile)
activate TST
deactivate TST
loop for each TestFileDTO of the list

UI -> CTRL : createTestsFromFile(TestFileDTO)
activate CTRL



CTRL -> CLIENT_CTRL : existsClient = createClient(testFileDTO.getClientDTO())
activate CLIENT_CTRL

ref over CLIENT_CTRL
SD_createClient(clientDto)
end
deactivate CLIENT_CTRL

alt client doesn't exist in Client Store
CTRL -> CLIENT_CTRL : clientCreation = saveClient()
activate CLIENT_CTRL
ref over CLIENT_CTRL
SD_saveClient()
end

deactivate CLIENT_CTRL
end
CTRL -> TEST_CTRL : createTest(TestFileDTO)
activate TEST_CTRL

TEST_CTRL -> PLAT : clientStore = getClientStore()
activate PLAT
deactivate PLAT


TEST_CTRL -> PLAT : testTypeStore = getTestTypeStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> PLAT : parameterStore = getParameterStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> PLAT : calStore = getClinicalAnalysisLaboratoryStore()
activate PLAT
deactivate PLAT

TEST_CTRL -> CLIENT_STORE : associatedClient = getClientByTinNumber(testFileDTO.getClientDTO().getTinNumber)
activate CLIENT_STORE
deactivate CLIENT_STORE

TEST_CTRL -> TEST_TYPE_STORE : selectedTestType = getTestTypeByCode(TestFileDTO.getTestTypeCode)
activate TEST_TYPE_STORE
deactivate TEST_TYPE_STORE



TEST_CTRL -> PARAM_STORE : selectedParamsList = getParamsByCodes(TestFileDTO.getParamsCodes)
activate PARAM_STORE
deactivate PARAM_STORE

TEST_CTRL -> CAL_STORE : cal = getCalByCode(TestFileDTO.getCalId)
activate CAL_STORE
deactivate CAL_STORE

ref over TEST_CTRL
SD_extractDatesFromDto
end
TEST_CTRL -> PLAT : testStore = getTestStore()
activate PLAT
PLAT -> ORG** : create()
deactivate PLAT

TEST_CTRL -> ORG : test = createTest(nhsCode, associatedClient,\n selectedTestType, selectedParamsList, paramsResults, cal,\n testRegDate, testChemDate, testDiagnosisDate, testValidationDate)
activate ORG
ORG -> TAREFA** : createTest(nhsCode, associatedClient,\n selectedTestType, selectedParamsList, paramsResults, cal,\n testRegDate, testChemDate, testDiagnosisDate, testValidationDate)


activate TAREFA
TAREFA -> TAREFA : checkAttributes(NHScode, associatedClient)



loop for each parameter of the list
TAREFA -> ExternalAPI** : refValue = getRefValueFor(parameter)
TAREFA -> tp**: testParameter =  create(parameter, result, refValue)
TAREFA -> TAREFA: testParameters.add(testParameter)
end

TAREFA -> TAREFA : code = generateSequentialCode()
deactivate TAREFA



TEST_CTRL -> ORG : result = validateTest(test)
TEST_CTRL -> CTRL : result
deactivate TEST_CTRL

deactivate TEST_CTRL
deactivate ORG

CTRL -> TEST_CTRL : saveTest()
activate TEST_CTRL

TEST_CTRL -> PLAT : testStore = getTestStore()
activate PLAT
|||
deactivate PLAT

TEST_CTRL -> ORG : saveTest(test)
activate ORG

ORG -> ORG: validateTest(test)
ORG -> ORG: addTest(test)
deactivate ORG

TEST_CTRL -> CTRL : result
deactivate TEST_CTRL


CTRL -> TEST_CTRL : addSample()
activate TEST_CTRL
alt testChemDate different than null
TEST_CTRL -> SAM_CTRL** : create()
TEST_CTRL -> SAM_CTRL : createSample()
activate SAM_CTRL
deactivate SAM_CTRL

TEST_CTRL -> SAM_CTRL : addSample(test.getCode())
activate SAM_CTRL
deactivate SAM_CTRL
end
TEST_CTRL -> CTRL : result
deactivate TEST_CTRL


CTRL - -> UI: result
deactivate CTRL
end


UI - -> ADM : informs operation success\n and shows all created tests
deactivate ORG
deactivate CTRL
deactivate UI

deactivate ADM

@enduml

PlantUML version 1.2021.00(Sun Jan 10 10:25:05 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: BR
--></g></svg>