@startuml
autonumber
'hide footbox
actor "Organization Employee" as ADM

participant ":RegisterClientUI" as UI
participant ":RegisterClientController" as CTRL
participant "session\n:UserSession" as SESSAO
participant ":Platform" as PLAT


activate ADM
ADM -> UI : asks to register a new client
activate UI
UI --> ADM : requests data (clients citizen card number, NHS number,  birth \n date, sex, TIN number, e-mail, name, phone number)
deactivate UI

ADM -> UI : types requested data
activate UI

UI -> CTRL : createClient(clients citizen card number, NHS number,  birth \n date, sex, TIN number, e-mail, name, phone number)
activate CTRL

CTRL -> PLAT : cl = createClient(clients citizen card number, NHS number,  birth \n date, sex, TIN number, e-mail, name, phone number)
activate PLAT

CTRL -> PLAT : validateClient(cl)
activate PLAT
|||
deactivate PLAT
deactivate CTRL

UI --> ADM : informs operation sucess
deactivate PLAT
deactivate UI

ADM -> UI : confirms the data
activate UI

UI -> CTRL : saveClient()
activate CTRL

CTRL -> PLAT : saveClient(cl)
activate PLAT
|||
deactivate PLAT

CTRL -> _APP: app = getInstance()
activate _APP
|||
deactivate _APP

CTRL -> APP: session = getCurrentSession()
activate APP
|||
deactivate APP

CTRL -> SESSAO: email = getUserEmail()
activate SESSAO
|||
deactivate SESSAO

CTRL -> PLAT: org = getOrganizationByUserEmail(email)
activate PLAT
|||
deactivate PLAT

CTRL -> ORG: task=createTask(ref,designation,informalDesc,technicalDesc,duration,cost,cat)
activate ORG

ORG --> TAREFA**: create(ref,designation,informalDesc,technicalDesc,duration,cost,cat)
ORG -> ORG: validateTask(task)

CTRL --> UI: result

UI --> ADM: informs operation success
deactivate ORG
deactivate PLAT
deactivate CTRL
deactivate UI


deactivate ORG
deactivate CTRL
deactivate UI

deactivate ADM

@enduml