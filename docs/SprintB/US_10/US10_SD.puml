@startuml
autonumber
'hide footbox
actor "Administrator" as ADM

participant ":CreateParameterUI" as UI
participant ":CreateParameterController" as CTRL
participant "cmp\n:Company" as CMP
participant "store\n:ParameterCategory" as store
participant ":CreateParameterCategoryController" as PCCTRL
'participant "ApplicationPOT" as _APP
'participant "app\n:ApplicationPOT" as APP
'participant "session\n:UserSession" as SESSION
'participant ":Platform" as PLAT
participant "prm\n:Parameter" as PRM
participant "cat\n:Category" as CAT
participant "lc\n:List<Category>" as LIST_CAT

activate ADM
ADM -> UI : asks to create a new parameter
activate UI
UI --> ADM : requests data(i.e., parameterCode, shortName, description)
deactivate UI

ADM -> UI : types requested data
activate UI

UI -> CTRL : lc = getCategories()
activate CTRL

CTRL -> CMP : categoriesStore = getParameterCategoryStore()
activate CMP
|||
deactivate CMP
CTRL -> store : categoriesList = getCategories()
activate store
|||
deactivate store
deactivate CTRL

UI --> ADM : shows parameter categories list and ask to select one
deactivate CMP
deactivate UI

ADM -> UI : selects a parameter category
activate UI

UI -> CTRL : createParameter(parameterCode, shortName, description, categoryCode)
activate CTRL

CTRL -> PCCTRL : cat = getCategoryByCode(catCode)
activate PCCTRL
|||
deactivate PCCTRL

'CTRL -> _APP: app = getInstance()
'activate _APP
'|||
'deactivate _APP

'CTRL -> APP: session = getCurrentSession()
'activate APP
'|||
'deactivate APP

CTRL -> CMP: prm = createParameter(parameterCode, shortName, description, cat)
activate CMP

CMP --> PRM**: create(parameterCode, shortName, description, cat)
CTRL -> CMP: validateParameter(parameter)

CTRL --> UI: result

UI --> ADM: shows all data and requests confirmation
deactivate CMP
'deactivate PLAT
deactivate CTRL
deactivate UI

ADM -> UI : confirms the data
activate UI
UI -> CTRL : saveParameter()
activate CTRL

CTRL -> CMP : saveParameter(parameter)
activate CMP

CMP -> CMP: validateParameter(parameter)
CMP -> CMP: addParameter(parameter)

CTRL --> UI: result

UI --> ADM : informs operation success
deactivate CMP
deactivate CTRL
deactivate UI

deactivate ADM

@enduml